[–í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è](README.md)

# Apache Kafka
* [–ß—Ç–æ —Ç–∞–∫–æ–µ Apache Kafka?](#—á—Ç–æ-—Ç–∞–∫–æ–µ-apache-kafka)
* [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Kafka](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-kafka)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

* Topic
  * [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–æ–ø–∏–∫–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ç–æ–ø–∏–∫–∞)
  * [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–ø–∏–∫–∞ Kafka](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-—Ç–æ–ø–∏–∫–∞-kafka)
* Broker
  * [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±—Ä–æ–∫–µ—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–±—Ä–æ–∫–µ—Ä–∞)
  * [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–æ–∫–µ—Ä–∞ Kafka](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–±—Ä–æ–∫–µ—Ä–∞-kafka)
* Producer
  * [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–¥—é—Å–µ—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–¥—é—Å–µ—Ä–∞)
  * [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–ø—Ä–æ–¥—é—Å–µ—Ä–∞)
  * [–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka Producer](#–ø—Ä–∏–º–µ—Ä-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏-kafka-producer)
* Consumer
  * [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Å—é–º–µ—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∫–æ–Ω—Å—é–º–µ—Ä–∞)
  * [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Å—é–º–µ—Ä–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–∫–æ–Ω—Å—é–º–µ—Ä–∞)
  * [–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka Consumer](#–ø—Ä–∏–º–µ—Ä-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏-kafka-consumer)

**Kafka API**

* [–û—Å–Ω–æ–≤–Ω—ã–µ API Kafka](#–æ—Å–Ω–æ–≤–Ω—ã–µ-api-kafka)
* [–ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Producer API?](#–∫–∞–∫–æ–≤–∞-—Ä–æ–ª—å-producer-api)
* [–ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Consumer API?](#–∫–∞–∫–æ–≤–∞-—Ä–æ–ª—å-consumer-api)
* [–ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Connector API?](#–∫–∞–∫–æ–≤–∞-—Ä–æ–ª—å-connector-api)
* [–ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Streams API?](#–∫–∞–∫–æ–≤–∞-—Ä–æ–ª—å-streams-api)
* [–ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Transactions API?](#–∫–∞–∫–æ–≤–∞-—Ä–æ–ª—å-transactions-api)
* [–ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Quota API?](#–∫–∞–∫–æ–≤–∞-—Ä–æ–ª—å-quota-api)
* [–ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å AdminClient API?](#–∫–∞–∫–æ–≤–∞-—Ä–æ–ª—å-AdminClient-api)

**Kafka Consumer**

* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–µ–Ω-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä-–≥—Ä—É–ø–ø—ã)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Consumer heartbeat thread?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–µ–Ω-consumer-heartbeat-thread)
* [–ö–∞–∫ Kafka –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è?](#–∫–∞–∫-kafka-–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç-—Å–æ–æ–±—â–µ–Ω–∏—è)
* [–ö–∞–∫ Kafka –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –∫–æ–Ω—Å—é–º–µ—Ä–∞?](#–∫–∞–∫-kafka-–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç-–∑–∞–¥–µ—Ä–∂–∫—É-–∫–æ–Ω—Å—é–º–µ—Ä–∞)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã –º–µ—Ç–æ–¥—ã subscribe() –∏ poll()?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–Ω—ã-–º–µ—Ç–æ–¥—ã-subscribe-–∏-poll)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –º–µ—Ç–æ–¥ position()?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–µ–Ω-–º–µ—Ç–æ–¥-position)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã –º–µ—Ç–æ–¥—ã commitSync() –∏ commitAsync()?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–Ω—ã-–º–µ—Ç–æ–¥—ã-commitsync-–∏-commitasync)

**–î—Ä—É–≥–∏–µ –≤–æ–ø—Ä–æ—Å—ã**

* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –ø—Ä–æ–¥—é—Å–µ—Ä?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–µ–Ω-–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π-–ø—Ä–æ–¥—é—Å–µ—Ä)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Partitioner?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–µ–Ω-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å-partitioner)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Broker log cleaner thread?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–µ–Ω-broker-log-cleaner-thread)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Kafka Mirror Maker?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–µ–Ω-kafka-mirror-maker)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ Schema Registry?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–Ω–∞-schema-registry)
* [–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Streams DSL?](#–¥–ª—è-—á–µ–≥–æ-–Ω—É–∂–µ–Ω-streams-dsl)
* [–ö–∞–∫ Kafka –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π?](#–∫–∞–∫-kafka-–æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç-–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-—Å–æ–æ–±—â–µ–Ω–∏–π)
* [–ö–∞–∫ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±—Ä–æ–∫–µ—Ä–∞?](#–∫–∞–∫-–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏-–ø–æ–ª—É—á–∞—é—Ç-—Å–æ–æ–±—â–µ–Ω–∏—è-–æ—Ç-–±—Ä–æ–∫–µ—Ä–∞)

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∏ —Å–∏—Å—Ç–µ–º–∞–º–∏**

* [–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Kafka Consumer –∏ Kafka Stream?](#–≤-—á–µ–º-—Ä–∞–∑–Ω–∏—Ü–∞-–º–µ–∂–¥—É-kafka-consumer-–∏-kafka-stream)
* [–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Kafka Streams –∏ Apache Flink?](#–≤-—á–µ–º-—Ä–∞–∑–Ω–∏—Ü–∞-–º–µ–∂–¥—É-kafka-streams-–∏-apache-flink)
* [–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Kafka –∏ Flume?](#–≤-—á–µ–º-—Ä–∞–∑–Ω–∏—Ü–∞-–º–µ–∂–¥—É-kafka-–∏-flume)
* [–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Kafka –∏ RabbitMQ?](#–≤-—á–µ–º-—Ä–∞–∑–Ω–∏—Ü–∞-–º–µ–∂–¥—É-kafka-–∏-rabbitmq)


## –ß—Ç–æ —Ç–∞–∫–æ–µ Apache Kafka?

–≠—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –¥–ª—è –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö 
—Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

* –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
* –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
* –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø–∏—Å–µ–π –∑–∞–Ω–æ–≤–æ
* –ì–∏–±–∫–æ—Å—Ç—å –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

* Œª-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–ª–∏ k-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
* –°—Ç—Ä–∏–º–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
* –ú–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ (producer –∏ consumer)
* –¢—Ä–µ–±—É–µ—Ç—Å—è –∫—Ä–∞—Ç–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß–µ–≥–æ –≤ Kafka –Ω–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏

* –≠—Ç–æ –Ω–µ –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
* –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
* DLQ
* AMQP / MQTT
* TTL –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
* –û—á–µ—Ä–µ–¥–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Kafka

* **Producer (–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å)** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫–∏ Kafka
* **Consumer (–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å)** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–ø–∏–∫–∏ –∏ —á–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
* **Broker (–ë—Ä–æ–∫–µ—Ä)** ‚Äî —Å–µ—Ä–≤–µ—Ä Kafka, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç, —Ö—Ä–∞–Ω–∏—Ç –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è. –í –∫–ª–∞—Å—Ç–µ—Ä–µ Kafka –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –±—Ä–æ–∫–µ—Ä–æ–≤
* **Topic (–¢–æ–ø–∏–∫)** ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ä–≥–∞–Ω–∏–∑—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫–∏, –∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —á–∏—Ç–∞—é—Ç –∏–∑ –Ω–∏—Ö
* **Partition (–†–∞–∑–¥–µ–ª)** ‚Äî –∫–∞–∂–¥—ã–π —Ç–æ–ø–∏–∫ —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –°–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏—è—Ö —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã
* **Zookeeper** ‚Äî —Å–µ—Ä–≤–∏—Å, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π Kafka –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –±—Ä–æ–∫–µ—Ä–æ–≤. 
–û–¥–Ω–∞–∫–æ –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Kafka –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç Zookeeper –≤ –ø–æ–ª—å–∑—É —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö KRaft (Kafka Raft). 
–≠—Ç–æ –Ω–æ–≤–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö Kafka, –∫–æ—Ç–æ—Ä–∞—è —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Zookeeper. –û–Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ Raft-–∫–æ–Ω—Å–µ–Ω—Å—É—Å–µ, 
–ø–æ–∑–≤–æ–ª—è—è Kafka –±—Ä–æ–∫–µ—Ä–∞–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–æ–±–æ–π.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–æ–ø–∏–∫–∞

* **–¢–æ–ø–∏–∫ —Ä–∞–∑–±–∏—Ç –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏** ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º –¥–ª—è –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è
* **–ü–∞—Ä—Ç–∏—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ** ‚Äî Kafka —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
* **–ü–∞—Ä—Ç–∏—Ü–∏–∏ –¥–µ–ª—è—Ç—Å—è –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç—ã** ‚Äî —Å–µ–≥–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±—ã—á–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ, —Å–µ–≥–º–µ–Ω—Ç—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ –ø–∞—Å—Å–∏–≤–Ω—ã–µ –∏ –∞–∫—Ç–∏–≤–Ω—ã–π.
  –ó–∞–ø–∏—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ–≥–º–µ–Ω—Ç
* **–î–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è –ª–∏–±–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –ª–∏–±–æ –ø–æ —Ä–∞–∑–º–µ—Ä—É**. –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–µ–≥–º–µ–Ω—Ç–Ω–æ, —Å —Å–∞–º–æ–≥–æ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞
  * **retention.bytes** - –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É
  * **retention.ms** - –ø–æ –≤—Ä–µ–º–µ–Ω–∏
* **–°–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –ø–æ –µ–≥–æ Offset** ‚Äî –∫–∞–∂–¥–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–º–µ—â–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å (offset), –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–ø–∏–∫–∞ Kafka

### –†–µ–ø–ª–∏–∫–∞—Ü–∏—è

* `replication.factor`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Ç–æ–ø–∏–∫–∞
  * **–ü—Ä–∏–º–µ—Ä**: `replication.factor=3`
* `min.insync.replicas`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫
  * **–ü—Ä–∏–º–µ—Ä**: `min.insync.replicas=2`

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

* `retention.ms`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –í—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–æ–ø–∏–∫–µ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
  * **–ü—Ä–∏–º–µ—Ä**: `retention.ms=604800000` (7 –¥–Ω–µ–π)
* `retention.bytes`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–æ–ø–∏–∫–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è
  * **–ü—Ä–∏–º–µ—Ä**: `retention.bytes=10737418240` (10 GB)
* `segment.bytes`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–∞–∑–º–µ—Ä —Å–µ–≥–º–µ–Ω—Ç–∞ –ª–æ–≥–æ–≤ —Ç–æ–ø–∏–∫–∞
  * **–ü—Ä–∏–º–µ—Ä**: `segment.bytes=1073741824` (1 GB)

### –ü–æ–ª–∏—Ç–∏–∫–∏ –æ—á–∏—Å—Ç–∫–∏

* `cleanup.policy`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∫ Kafka –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  * **–ó–Ω–∞—á–µ–Ω–∏—è**: `delete`, `compact`
  * **–ü—Ä–∏–º–µ—Ä**: `cleanup.policy=delete`

### –ü–∞—Ä—Ç–∏—Ü–∏–∏

* `num.partitions`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –≤ —Ç–æ–ø–∏–∫–µ
  * **–ü—Ä–∏–º–µ—Ä**: `num.partitions=3`

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±—Ä–æ–∫–µ—Ä–∞

* **–£ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Å–≤–æ–π –ª–∏–¥–µ—Ä** ‚Äî –≤ Kafka –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ –≤ —Ç–æ–ø–∏–∫–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ª–∏–¥–µ—Ä-–±—Ä–æ–∫–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç
  –∑–∞ –∑–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
* **–°–æ–æ–±—â–µ–Ω–∏—è –ø–∏—à—É—Ç—Å—è –≤ –ª–∏–¥–µ—Ä–∞** ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–æ–∫–µ—Ä-–ª–∏–¥–µ—Ä –ø–∞—Ä—Ç–∏—Ü–∏–∏
* **–î–∞–Ω–Ω—ã–µ —Ä–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É –±—Ä–æ–∫–µ—Ä–∞–º–∏** ‚Äî –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ Kafka —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–π –Ω–∞
  –¥—Ä—É–≥–∏–µ –±—Ä–æ–∫–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ä–µ–ø–ª–∏–∫–∞–º–∏
* **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–µ–π–ª–æ–≤–µ—Ä –ª–∏–¥–µ—Ä–∞** ‚Äî –≤ —Å–ª—É—á–∞–µ —Å–±–æ—è –±—Ä–æ–∫–µ—Ä–∞-–ª–∏–¥–µ—Ä–∞ Kafka –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –Ω–æ–≤—ã–π –ª–∏–¥–µ—Ä –∏–∑ —á–∏—Å–ª–∞
  —Ä–µ–ø–ª–∏–∫, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ—Å—à–æ–≤–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–æ–∫–µ—Ä–∞ Kafka

### –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

* `min.insync.replicas`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
  * **–ü—Ä–∏–º–µ—Ä**: `min.insync.replicas=2`
* `unclean.leader.election.enable`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–∞–∑—Ä–µ—à–∞–µ—Ç –≤—ã–±–æ—Ä –ª–∏–¥–µ—Ä–∞ –∏–∑ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫, –µ—Å–ª–∏ –Ω–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫
  * **–ü—Ä–∏–º–µ—Ä**: `unclean.leader.election.enable=false`

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

* `log.dirs`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–∞ –¥–∏—Å–∫–µ, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–≥–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π
  * **–ü—Ä–∏–º–µ—Ä**: `log.dirs=/var/lib/kafka/logs`
* `log.retention.hours`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∞—Ö
  * **–ü—Ä–∏–º–µ—Ä**: `log.retention.hours=168` (7 –¥–Ω–µ–π)
* `log.segment.bytes`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–µ–≥–º–µ–Ω—Ç–∞ –ª–æ–≥–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π
  * **–ü—Ä–∏–º–µ—Ä**: `log.segment.bytes=1073741824` (1 GB)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∑–∞–¥–µ—Ä–∂–∫–∏

* `num.network.threads`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  * **–ü—Ä–∏–º–µ—Ä**: `num.network.threads=3`
* `num.io.threads`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞
  * **–ü—Ä–∏–º–µ—Ä**: `num.io.threads=8`
* `socket.send.buffer.bytes`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–µ—Ç–∏
  * **–ü—Ä–∏–º–µ—Ä**: `socket.send.buffer.bytes=102400`

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

* `message.max.bytes`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –±—Ä–æ–∫–µ—Ä –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å
  * **–ü—Ä–∏–º–µ—Ä**: `message.max.bytes=1048576` (1 MB)
* `replica.fetch.max.bytes`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Ä–µ–ø–ª–∏–∫–∏
  * **–ü—Ä–∏–º–µ—Ä**: `replica.fetch.max.bytes=1048576` (1 MB)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* `ssl.keystore.location`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—É—Ç—å –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É –∫–ª—é—á–µ–π SSL
  * **–ü—Ä–∏–º–µ—Ä**: `ssl.keystore.location=/var/private/ssl/kafka.keystore.jks`
* `ssl.truststore.location`
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—É—Ç—å –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
  * **–ü—Ä–∏–º–µ—Ä**: `ssl.truststore.location=/var/private/ssl/kafka.truststore.jks`

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–¥—é—Å–µ—Ä–∞

* **–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (Record)**: –ü—Ä–æ–¥—é—Å–µ—Ä —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ –∫–ª—é—á (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π), –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ,
  —Ç–∞–∫–∏–µ –∫–∞–∫ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏. –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–æ–ø–∏–∫ (Topic), –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–Ω–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π
* **–í—ã–±–æ—Ä –ø–∞—Ä—Ç–∏—Ü–∏–∏**: –ï—Å–ª–∏ –∫–ª—é—á —Å–æ–æ–±—â–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω, Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –≤ –∫–∞–∫—É—é –ø–∞—Ä—Ç–∏—Ü–∏—é
  –∑–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∫–ª—é—á–æ–º –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–∞—Ä—Ç–∏—Ü–∏—é). –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç, Kafka —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç
  —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º —Å –ø–æ–º–æ—â—å—é round-robin –∏–ª–∏ –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–∞–≤–∏–ª–∞–º
* **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –±—É—Ñ–µ—Ä (Batching)**: –î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—é—Å–µ—Ä Kafka –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏, –∞ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞–∫–µ—Ç—ã (batching), –ø—Ä–µ–∂–¥–µ —á–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –±—Ä–æ–∫–µ—Ä—É. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç
  —Å–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±—Ä–æ–∫–µ—Ä–∞
* **–°–∂–∞—Ç–∏–µ (Compression)**: –î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ–±—ä—ë–º–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç —Å–∂–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
  —Ç–∞–∫–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤, –∫–∞–∫ GZIP, Snappy –∏–ª–∏ LZ4. –°–∂–∞—Ç–∏–µ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ç—å –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–±–æ–ª—å—à–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ
  —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
* **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**: –ü—Ä–æ–¥—é—Å–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤
  –±—É—Ñ–µ—Ä –ø–∞–º—è—Ç–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –±—Ä–æ–∫–µ—Ä—É, –Ω–µ –æ–∂–∏–¥–∞—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
* **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (Acknowledgments)**: Kafka –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –æ—Ç –±—Ä–æ–∫–µ—Ä–æ–≤
* **–†–µ—Ç—Ä–∞–π –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Ä–µ—Ç—Ä–∞–π).
  –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–æ–¥—é—Å–µ—Ä–∞, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤
  —Å–ª—É—á–∞–µ —Å–±–æ—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫—É —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–¥–∏–Ω —Ä–∞–∑
* **Error handling**: –ü—Ä–æ–¥—é—Å–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç
  –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ —á–µ—Ä–µ–∑ callback

### –†–µ–∑—é–º–µ

* –ü—Ä–æ–¥—é—Å–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏—é –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è
* –ü—Ä–æ–¥—é—Å–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –≥–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
* –í –ø—Ä–æ–¥—é—Å–µ—Ä–µ –º–æ–∂–Ω–æ —Ç—é–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–∞

### Bootstrap-—Å–µ—Ä–≤–µ—Ä—ã (`bootstrap.servers`)

* **–û–ø–∏—Å–∞–Ω–∏–µ**: –£–∫–∞–∑—ã–≤–∞–µ—Ç –∞–¥—Ä–µ—Å–∞ –±—Ä–æ–∫–µ—Ä–æ–≤ Kafka, –∫ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–æ–¥—é—Å–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
* **–ü—Ä–∏–º–µ—Ä**: `bootstrap.servers: localhost:9092,localhost:9093`
* **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: Kafka –ø—Ä–æ–¥—é—Å–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –±—Ä–æ–∫–µ—Ä—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –æ –∫–ª–∞—Å—Ç–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–ø–∏–∫–∞—Ö –∏ –ø–∞—Ä—Ç–∏—Ü–∏—è—Ö). –≠—Ç–∏ –±—Ä–æ–∫–µ—Ä—ã —Å–ª—É–∂–∞—Ç —Ç–æ—á–∫–∞–º–∏ –≤—Ö–æ–¥–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä Kafka.

### –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏—è

–ü—Ä–æ–¥—é—Å–µ—Ä –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å (—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å) –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–π—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Kafka

* **–ö–ª—é—á–µ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª—é—á–∞:**
  * `key.serializer`
  * –ü—Ä–∏–º–µ—Ä: `key.serializer: org.apache.kafka.common.serialization.StringSerializer`
* **–ö–ª—é—á–µ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è:**
  * `value.serializer`
  * –ü—Ä–∏–º–µ—Ä: `value.serializer: org.apache.kafka.common.serialization.StringSerializer`

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤:**
* `StringSerializer` –¥–ª—è —Å—Ç—Ä–æ–∫
* `ByteArraySerializer` –¥–ª—è –º–∞—Å—Å–∏–≤–∞ –±–∞–π—Ç–æ–≤
* `LongSerializer` –¥–ª—è —á–∏—Å–µ–ª
* –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –±—É—Ñ–µ—Ä

–ü—Ä–æ–¥—é—Å–µ—Ä Kafka –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –∏ –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

* **batch.size**: –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ (batch), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–¥—é—Å–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±—Ä–æ–∫–µ—Ä—É
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –±—Ä–æ–∫–µ—Ä—É
  * **–ü—Ä–∏–º–µ—Ä**: `"batch.size": 16384` (16 KB)
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –ë–æ–ª—å—à–∏–µ –ø–∞–∫–µ—Ç—ã –º–æ–≥—É—Ç –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –º–æ–≥—É—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏
* **linger.ms**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–∞
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å, –ø–æ–∫–∞ –±—É—Ñ–µ—Ä –Ω–∞–∫–æ–ø–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑
  * **–ü—Ä–∏–º–µ—Ä**: `linger.ms: 5` (–≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è 5 –º—Å)
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥—é—Å–µ—Ä—É —Å–æ–±–∏—Ä–∞—Ç—å –±–æ–ª—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞–∫–µ—Ç–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π, —á—Ç–æ –º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ç–∏
* **buffer.memory**: –†–∞–∑–º–µ—Ä –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–ª—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±—â–∏–π –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π, –æ–∂–∏–¥–∞—é—â–∏—Ö –æ—Ç–ø—Ä–∞–≤–∫–∏
  * **–ü—Ä–∏–º–µ—Ä**: `buffer.memory: 33554432` (32 MB)
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –ï—Å–ª–∏ –±—É—Ñ–µ—Ä –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–¥—é—Å–µ—Ä –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–æ–∫–∞ –±—É—Ñ–µ—Ä –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è

### –°–∂–∞—Ç–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

–ü—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç —Å–∂–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ–±—ä–µ–º–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

* **compression.type**
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø —Å–∂–∞—Ç–∏—è –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
  * **–ü—Ä–∏–º–µ—Ä**: `compression.type: gzip` (–≤–∞—Ä–∏–∞–Ω—Ç—ã: none, gzip, snappy, lz4, zstd)
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –°–∂–∞—Ç–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –ø–æ —Å–µ—Ç–∏, —á—Ç–æ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ç—å –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ,
    –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–∞—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ —Å–∂–∞—Ç–∏–µ/—Ä–∞–∑–∂–∞—Ç–∏–µ

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º (–ø–∞—Ä—Ç–∏—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ)

* **partitioner.class**
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–æ–¥—é—Å–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
  * **–ü—Ä–∏–º–µ—Ä—ã**:
    * **–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ –∑–∞–¥–∞–Ω–∞**, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DefaultPartitioner` , –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º
      —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –∏–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    * `partitioner.class: o.a.k.clients.producer.RoundRobinPartitioner` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ Round Robin –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
    * `partitioner.class: o.a.k.clients.producer.UniformStickyPartitioner` —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–∏–≤—è–∑—ã–≤–∞—è—Å—å
      –∫ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±—Ä–æ–∫–µ—Ä—ã

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (acks)

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –º–Ω–æ–≥–æ –±—Ä–æ–∫–µ—Ä–æ–≤ –¥–æ–ª–∂–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –ø—Ä–æ–¥—é—Å–µ—Ä –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å –µ–≥–æ
—É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º

* **acks**
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –æ—Ç –±—Ä–æ–∫–µ—Ä–æ–≤
  * **–ó–Ω–∞—á–µ–Ω–∏—è**:
    * `0`: –ü—Ä–æ–¥—é—Å–µ—Ä –Ω–µ –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (—Å–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞, –Ω–æ –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–π)
    * `1`: –ü—Ä–æ–¥—é—Å–µ—Ä –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –ª–∏–¥–µ—Ä–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏
    * `all` (–∏–ª–∏ `-1`): –ü—Ä–æ–¥—é—Å–µ—Ä –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –æ—Ç –≤—Å–µ—Ö —Ä–µ–ø–ª–∏–∫ (–Ω–∞–∏–±–æ–ª—å—à–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –Ω–æ —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏)
  * **–ü—Ä–∏–º–µ—Ä**: `acks: all`
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

* **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (retries):**
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø—Ä–æ–¥—é—Å–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
  * **–ü—Ä–∏–º–µ—Ä**: `retries: 3`
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à—ë–ª –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–±–æ–π, –ø—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π, —á—Ç–æ
    —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à–∞–Ω—Å –¥–æ—Å—Ç–∞–≤–∫–∏
* **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ–¥—é—Å–µ—Ä–∞ (enable.idempotence):**
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–∫–ª—é—á–µ–Ω–∏–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ —Å–±–æ—è—Ö
  * **–ü—Ä–∏–º–µ—Ä**: `enable.idempotence: true`
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑
* **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è (max.request.size):**
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±—Ä–æ–∫–µ—Ä—É
  * **–ü—Ä–∏–º–µ—Ä**: `max.request.size: 1048576` (1 MB)
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–µ—Ç–∏ –∏ –±—Ä–æ–∫–µ—Ä–æ–≤.
* **–¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (request.timeout.ms):**
  * **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –±—Ä–æ–∫–µ—Ä–∞
  * **–ü—Ä–∏–º–µ—Ä**: `request.timeout.ms: 30000` (30 —Å–µ–∫—É–Ω–¥)
  * **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ**: –ü–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –±—Ä–æ–∫–µ—Ä–∞ –≤ —Å–ª—É—á–∞–µ –µ–≥–æ —Å–±–æ—è

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka Producer

```java
import org.apache.kafka.clients.producer.KafkaProducer;
import org.apache.kafka.clients.producer.ProducerRecord;
import java.util.Properties;

public class KafkaStringArrayProducer {
    
    public static void main(String[] args) {
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Kafka Producer
        Properties props = new Properties();
        props.put("bootstrap.servers", "localhost:9092");
        props.put("key.serializer", "org.apache.kafka.common.serialization.StringSerializer");
        props.put("value.serializer", "org.apache.kafka.common.serialization.StringSerializer");

        // –°–æ–∑–¥–∞–Ω–∏–µ Kafka Producer
        KafkaProducer<String, String[]> producer = new KafkaProducer<>(props);

        String key = "user123";
        String[] value = {"message1", "message2", "message3"};

        // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
        ProducerRecord<String, String> record = new ProducerRecord<>("my_topic", key, value);
        record.headers().add("traceId", "someTraceId");

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Kafka
        producer.send(record, (metadata, exception) -> {
            if (exception != null) {
                System.out.println("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è: " + exception.getMessage());
            } else {
                System.out.println("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ç–æ–ø–∏–∫ " + metadata.topic() + " —Å –ø–∞—Ä—Ç–∏—Ü–∏–µ–π " + metadata.partition());
            }
        });

        producer.close();
    }
}
```

```properties
acks=all
retries=3
compression.type=gzip
```

### –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Kafka

```java
import org.apache.kafka.clients.producer.ProducerConfig;
import org.apache.kafka.common.serialization.StringSerializer;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.kafka.core.KafkaTemplate;
import org.springframework.kafka.core.DefaultKafkaProducerFactory;
import org.springframework.kafka.core.ProducerFactory;
import org.springframework.kafka.config.ConcurrentMessageListenerContainer;
import org.springframework.kafka.listener.MessageListenerContainer;
import org.springframework.kafka.producer.Producer;
import org.springframework.kafka.producer.ProducerRecord;

import java.util.HashMap;
import java.util.Map;

@EnableKafka
@Configuration
public class KafkaProducerConfig {
    
    @Autowired
    private KafkaProperties kafkaProperties;

    @Bean
    public Map<String, Object> producerConfigs() {
        Map<String, Object> props = new HashMap<>();
        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaProperties.getServer());
        props.put(ProducerConfig.CLIENT_ID_CONFIG, kafkaProperties.getProducerId());
        props.put(
                ProducerConfig.INTERCEPTOR_CLASSES_CONFIG, 
                "com.example.configuration.kafka.KafkaProducerLoggingInterceptor"
        );
        
        if ("SASL_SSL".equals(kafkaProperties.getSecurityProtocol())) {
            props.put("ssl.truststore.location", kafkaProperties.getSslTrustStoreLocation());
            props.put("ssl.truststore.password", kafkaProperties.getSslTrustStorePassword());
            props.put("ssl.truststore.type", kafkaProperties.getSslTrustStoreType());
            props.put("ssl.keystore.type", kafkaProperties.getSslKeyStoreType());
          
            props.put("sasl.mechanism", kafkaProperties.getSaslMechanism());
            props.put("security.protocol", kafkaProperties.getSecurityProtocol());
            props.put("sasl.jaas.config", kafkaProperties.getJaasConfigCompiled());
        }
        
        return props;
    }
  
    @Bean
    public ProducerFactory<String, String> producerFactory() {
        var stringSerializerKey = new StringSerializer();
        stringSerializerKey.configure(Map.of("key.serializer.encoding", "UTF-8"), true);
        stringSerializerKey.configure(Map.of("serializer.encoding", "UTF-8"), true);
    
        var stringSerializerValue = new StringSerializer();
        stringSerializerValue.configure(Map.of("value.serializer.encoding", "UTF-8"), false);
        stringSerializerValue.configure(Map.of("serializer.encoding", "UTF-8"), false);
    
        return new DefaultKafkaProducerFactory<>(producerConfigs(), stringSerializerKey, stringSerializerValue);
    }
  
    @Bean
    public KafkaTemplate<String, String> kafkaTemplate() {
        return new KafkaTemplate<>(producerFactory());
    }
}
```

```java
import org.springframework.kafka.core.KafkaTemplate;
import org.springframework.stereotype.Service;

@Service
public class KafkaProducerService {
    
    private final KafkaTemplate<String, String> kafkaTemplate;

    public KafkaProducerService(KafkaTemplate<String, String> kafkaTemplate) {
        this.kafkaTemplate = kafkaTemplate;
    }

    public void sendMessage(String message, String key, String topic) {
      try {
        log.info("Sending message {}", data);
        kafkaTemplate.send(topic, key, message);
        log.info("Successfully send message {}", data);
      } catch (Exception ex) {
        log.error("Failed send message to {} topic by key {}", key, topic);
        throw ex;
      }
    }
}
```

```java
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/kafka")
public class KafkaController {

    @Autowired
    private KafkaProducerService kafkaProducerService;

    @PostMapping("/send")
    public String sendMessage(@RequestParam String message, @RequestParam String key, @RequestParam String topic) {
        kafkaProducerService.sendMessage(message, key, topic);
        return "Message sent to Kafka!";
    }
}
```

### –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Cloud Stream

```yaml
spring:
  cloud:
    stream:
      bindings:
        output:
          destination: my_topic
      kafka:
        binder:
          brokers: localhost:9092
```

```java
import org.springframework.cloud.stream.annotation.EnableBinding;
import org.springframework.cloud.stream.messaging.Source;
import org.springframework.integration.support.MessageBuilder;
import org.springframework.messaging.Message;
import org.springframework.stereotype.Service;

@Service
@EnableBinding(Source.class) // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞–Ω–∞–ª—É —Å–æ–æ–±—â–µ–Ω–∏–π
public class KafkaStreamProducer {

    private final Source source;

    public KafkaStreamProducer(Source source) {
        this.source = source;
    }

    public void sendMessage(String message) {
        Message<String> msg = MessageBuilder.withPayload(message).build();
        source.output().send(msg); // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Kafka
    }
}
```

```java
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/kafka-stream")
public class KafkaStreamController {

    @Autowired
    private KafkaStreamProducer kafkaStreamProducer;

    @PostMapping("/send")
    public String sendMessage(@RequestParam String message) {
        kafkaStreamProducer.sendMessage(message);
        return "Message sent to Kafka via Spring Cloud Stream!";
    }
}
```

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Å—é–º–µ—Ä–∞
![–õ–æ–≥–æ—Ç–∏–ø](./images/consumer-groups.png)


–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Kafka Consumer API** –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±—Ä–æ–∫–µ—Ä–∞–º–∏ Kafka. –û–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç
–∏—Ö —Å–æ–≥–ª–∞—Å–Ω–æ —Å–≤–æ–µ–π –ª–æ–≥–∏–∫–µ. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –≥—Ä—É–ø–ø—ã **Consumer Groups**.

### –†–µ–∑—é–º–µ

* "Smart" –∫–æ–Ω—Å—é–º–µ—Ä
* –ö–æ–Ω—Å—é–º–µ—Ä –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–∞—Ñ–∫—É
* –ö–æ–Ω—Å—é–º–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≥–∞—Ä–∞–Ω—Ç–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–µ–π–ª–æ–≤–µ—Ä –≤ –∫–æ–Ω—Å—é–º–µ—Ä-–≥—Ä—É–ø–ø–µ
* –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Å—é–º–µ—Ä-–≥—Ä—É–ø–ø–µ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### Consumer Group

Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é Consumer Groups, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–æ–ø–∏–∫–æ–≤. –ö–∞–∂–¥—ã–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –≤ –≥—Ä—É–ø–ø–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–æ–ø–∏–∫–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏.

* –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –æ–¥–Ω–æ–≥–æ Kafka Topic –¥–µ–ª—è—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏ –≤ –≥—Ä—É–ø–ø–µ
* –ï—Å–ª–∏ –≤ –≥—Ä—É–ø–ø–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, Kafka –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—Ü–∏—è —Ç–æ–ø–∏–∫–∞ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–º
* –í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Å—Ç—Ä–æ—è, –µ–≥–æ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –æ—Å—Ç–∞–≤—à–∏–º–∏—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏

  
 Consumer Group ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Å—É–º–µ—Ä–æ–≤ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É –Ω–∏–º–∏.

üîπ –ë–µ–∑ Consumer Group:
* –ö–∞–∂–¥—ã–π consumer –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–ø–∏–∫.
* –í—Å–µ –æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
 –≠—Ç–æ —É–¥–æ–±–Ω–æ, –µ—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—É—á–∏–ª –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Å–ª—É—à–∞—é—Ç –æ–¥–∏–Ω —Ç–æ–ø–∏–∫).
* –ù–æ —ç—Ç–æ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Å–µ —á–∏—Ç–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ.

 üîπ –° Consumer Group:

*Kafka –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π group.id.
*–í–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –∫–æ–Ω—Å—É–º–µ—Ä–∞–º–∏.
‚Üí –ö–∞–∂–¥—ã–π consumer –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–≤–æ—é –ø–∞—Ä—Ç–∏—Ü–∏—é).
* –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É ‚Äî —á–µ–º –±–æ–ª—å—à–µ –∫–æ–Ω—Å—É–º–µ—Ä–æ–≤ –≤ –≥—Ä—É–ø–ø–µ, —Ç–µ–º –≤—ã—à–µ —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏.
* –ü—Ä–∏ —ç—Ç–æ–º Kafka –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π –ø–∞—Ä—Ç–∏—à–µ–Ω —á–∏—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º consumer‚Äô–æ–º –≤ –≥—Ä—É–ø–ø–µ ‚Üí –Ω–µ—Ç –¥—É–±–ª–µ–π –∏ –∫–æ–ª–ª–∏–∑–∏–π.
* –ï—Å–ª–∏ –æ–¥–∏–Ω consumer –ø–∞–¥–∞–µ—Ç, –µ–≥–æ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –æ—Å—Ç–∞–≤—à–∏–º–∏—Å—è ‚Äî —ç—Ç–æ –¥–∞—ë—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.

#### Offset (–°–º–µ—â–µ–Ω–∏–µ)

–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç offset –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, —Å –∫–∞–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —á—Ç–µ–Ω–∏–µ. –°–º–µ—â–µ–Ω–∏–µ ‚Äî —ç—Ç–æ
—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏.

–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å offset –≤ Kafka –∏–ª–∏ –≤–Ω–µ –µ—ë (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ). –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å
–æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è, –æ–Ω –º–æ–∂–µ—Ç –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å —Ç–æ–≥–æ –º–µ—Å—Ç–∞, –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è, –ø—Ä–æ—á–∏—Ç–∞–≤ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π offset.

####  Poll (–û–ø—Ä–æ—Å)

–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ç–æ–¥ poll() –¥–ª—è –æ–ø—Ä–æ—Å–∞ Kafka –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –≠—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∏ Kafka –±—É–¥–µ—Ç
–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—é –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –º–µ—Ä–µ –∏—Ö –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è.

* –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∞–π–º-–∞—É—Ç, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–µ—Ç–æ–¥ poll() –≤–µ—Ä–Ω—ë—Ç –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç.
* –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å Kafka –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Kafka-–±—Ä–æ–∫–µ—Ä–∞–º –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ consumer group. –û–Ω –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Ç–æ–ø–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å.
2. **–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ç–æ–ø–∏–∫**: –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç–æ–ø–∏–∫–∏ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `subscribe()`.
3. **–û–ø—Ä–æ—Å**: –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `poll()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ï—Å–ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ –µ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –æ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—é –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**: –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –∏–∑–≤–ª–µ–∫–∞—è –ø–æ–ª–µ–∑–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –∫–∞–∂–¥–æ–≥–æ.
5. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏**: –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Å –ø–æ–º–æ—â—å—é `commit()`.
   –≠—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç **offset**, –ø–æ–∑–≤–æ–ª—è—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–µ–Ω–∏–µ —Å –º–µ—Å—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è.
6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å, –∫–∞–∫ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è
   (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫).
7. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã**: –ö–æ–≥–¥–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É, –æ–Ω –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ consumer group –∏ –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Kafka.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Å—é–º–µ—Ä–∞

* **bootstrap.servers** ‚Äî —Å–ø–∏—Å–æ–∫ –±—Ä–æ–∫–µ—Ä–æ–≤, –∫ –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å
* **group.id** ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π
* **auto.offset.reset** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ offset (`earliest` –¥–ª—è —á—Ç–µ–Ω–∏—è —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ –∏–ª–∏ `latest` –¥–ª—è —á—Ç–µ–Ω–∏—è —Å –∫–æ–Ω—Ü–∞)
* **enable.auto.commit** ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, –¥–æ–ª–∂–µ–Ω –ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–º–º–∏—Ç–∏—Ç—å offset. –ï—Å–ª–∏ `false`, –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤—Ä—É—á–Ω—É—é
* **auto.commit.interval.ms** ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∫–æ–º–º–∏—Ç–∞–º–∏ offset —Å–æ–æ–±—â–µ–Ω–∏–π, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è
* **max.poll.records** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∑–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤ `poll()`
* **session.timeout.ms** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –±–µ–∑ –æ–±—â–µ–Ω–∏—è —Å Kafka –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º
* **client.rack** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ç–æ–π–∫–∏ –∏–ª–∏ –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–∞. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —É –≤–∞—Å
  –µ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Kafka —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç–æ–π–∫–∞–º–∏ –∏–ª–∏ –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–∞–º–∏, –≥–¥–µ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã
  –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–∞–º–∏).

### –ß—Ç–æ —Ç–∞–∫–æ–µ Rack –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Kafka?

**Rack** ‚Äî —ç—Ç–æ –º–µ—Ç–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –±—Ä–æ–∫–µ—Ä–æ–≤ Kafka. –í Kafka –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å rack –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±—Ä–æ–∫–µ—Ä–∞
—Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `broker.rack`, —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–µ—â–∞—è —Ä–µ–ø–ª–∏–∫–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –º–∞—à–∏–Ω–∞—Ö –∏–ª–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–∞—Ö.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è client.rack**

* **–°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫**: Kafka –±—É–¥–µ—Ç –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ —Ç–æ—Ç –∂–µ rack, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–ª–∏–µ–Ω—Ç, —á—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞
* **–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: –° –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π client.rack –∏ broker.rack –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
  –∑–∞ —Å—á–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Ä–µ–ø–ª–∏–∫ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
* **–õ—É—á—à–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ rack –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka Consumer

```java
import org.apache.kafka.clients.consumer.ConsumerConfig;
import org.apache.kafka.clients.consumer.KafkaConsumer;
import org.apache.kafka.common.serialization.StringDeserializer;

import java.time.Duration;
import java.util.HashMap;
import java.util.Map;
import java.util.Collections;

public class KafkaConsumerExample {

    public static void main(String[] args) {
        String bootstrapServers = "localhost:9092";
        String groupId = "my-consumer-group";
        String topic = "my-topic";

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Consumer
        Map<String, Object> consumerConfigs = new HashMap<>();
        consumerConfigs.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);
        consumerConfigs.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);
        consumerConfigs.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);
        consumerConfigs.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);
        consumerConfigs.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, "earliest");

        // –°–æ–∑–¥–∞–Ω–∏–µ Consumer
        KafkaConsumer<String, String> consumer = new KafkaConsumer<>(consumerConfigs);

        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ç–µ–º—É
        consumer.subscribe(Collections.singletonList(topic));

        try {
            // –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Kafka
            while (true) {
                var records = consumer.poll(Duration.ofSeconds(1));
                records.forEach(record -> System.out.println("Received message: " + record.value()));
            }
        } finally {
            consumer.close();
        }
    }
}
```

**At least once**

–ß—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑, –Ω—É–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏.

```java
import org.apache.kafka.clients.consumer.KafkaConsumer;
import org.apache.kafka.clients.consumer.ConsumerConfig;
import org.apache.kafka.common.serialization.StringDeserializer;

import java.time.Duration;
import java.util.HashMap;
import java.util.Map;
import java.util.Collections;

public class KafkaConsumerAtLeastOnce {

  public static void main(String[] args) {
    try {
      // –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
      while (true) {
        var records = consumer.poll(Duration.ofSeconds(1));  // –û–∂–∏–¥–∞–Ω–∏–µ 1 —Å–µ–∫—É–Ω–¥—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
        process(records);
        consumer.commitAsync(); // Commit –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
      }
    } finally {
      consumer.close();  // –ó–∞–∫—Ä—ã—Ç–∏–µ consumer
    }
  }
}
```

**At most once**

–ß—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞, –Ω—É–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏–π
`enable.auto.commit=true`.

```java
import org.apache.kafka.clients.consumer.KafkaConsumer;
import org.apache.kafka.clients.consumer.ConsumerConfig;
import org.apache.kafka.common.serialization.StringDeserializer;

import java.time.Duration;
import java.util.HashMap;
import java.util.Map;
import java.util.Collections;

public class KafkaConsumerAtLeastOnce {

  public static void main(String[] args) {
    try {
      // –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
      while (true) {
        var records = consumer.poll(Duration.ofSeconds(1));  // –û–∂–∏–¥–∞–Ω–∏–µ 1 —Å–µ–∫—É–Ω–¥—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
        consumer.commitAsync(); // Commit –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
        process(records);
      }
    } finally {
      consumer.close();  // –ó–∞–∫—Ä—ã—Ç–∏–µ consumer
    }
  }
}
```

### –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Kafka

```java
@EnableKafka
@Configuration
public class KafkaConsumerConfig {

    @Autowired
    private KafkaProperties kafkaProperties;

    @Bean
    public ConsumerFactory<String, String> consumerFactory() {
        return new DefaultKafkaConsumerFactory<>(consumerConfigs());
    }

    @Bean
    public Map<String, Object> consumerConfigs() {
        Map<String, Object> configs = new HashMap<>();
        configs.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaProperties.getServer());
        configs.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaProperties.getConsumerGroupId());
        configs.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);
        configs.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);
        return configs;
    }

    @Bean
    public KafkaListenerContainerFactory<ConcurrentMessageListenerContainer<String, String>> kafkaListenerContainerFactory() {
        ConcurrentMessageListenerContainerFactory<String, String> factory = new ConcurrentMessageListenerContainerFactory<>();
        factory.setConsumerFactory(consumerFactory());
        return factory;
    }
}
```

```java
import org.springframework.kafka.annotation.KafkaListener;
import org.springframework.messaging.handler.annotation.Header;
import org.springframework.stereotype.Service;

@Service
public class KafkaConsumer {

    @KafkaListener(topics = "my_topic", groupId = "group_id")
    public void listen(@Payload String message,
                       @Header("traceId") String traceId,
                       @Header("correlationId") String correlationId) {
        System.out.println("Received message: " + message);
        System.out.println("Trace ID: " + traceId);
        System.out.println("Correlation ID: " + correlationId);
    }
}
```

**At least once**

```yaml
spring:
  kafka:
    consumer:
      enable-auto-commit: false  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ-commit
      auto-offset-reset: earliest  # –ù–∞—á–∏–Ω–∞—Ç—å —á—Ç–µ–Ω–∏–µ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ (–µ—Å–ª–∏ –Ω–µ—Ç —Å–º–µ—â–µ–Ω–∏—è)
      group-id: my-consumer-group
      max-poll-records: 500  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑
    listener:
      ack-mode: manual  # –†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```

```java
import org.apache.kafka.clients.consumer.ConsumerConfig;
import org.springframework.kafka.annotation.EnableKafka;
import org.springframework.kafka.annotation.KafkaListener;
import org.springframework.kafka.listener.MessageListener;
import org.springframework.kafka.listener.MessageListenerContainer;
import org.springframework.kafka.listener.config.DefaultMessageListenerContainer;
import org.springframework.kafka.core.ConsumerFactory;
import org.springframework.kafka.listener.ConcurrentMessageListenerContainer;
import org.springframework.kafka.core.DefaultKafkaConsumerFactory;
import org.springframework.kafka.listener.MessageListener;
import org.springframework.kafka.listener.MessageListenerContainer;

@EnableKafka
public class AtLeastOnceConsumer {

    @KafkaListener(topics = "my-topic", groupId = "my-consumer-group")
    public void listen(String message, Acknowledgment acknowledgment) {
        System.out.println("Received message: " + message);
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
        acknowledgment.acknowledge();
    }
}
```

**At most once**

```yaml
spring:
  kafka:
    consumer:
      enable-auto-commit: true  # –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ-commit
      group-id: my-consumer-group
      auto-offset-reset: earliest  # –ù–∞—á–∏–Ω–∞—Ç—å —á—Ç–µ–Ω–∏–µ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞
      max-poll-records: 100  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑
```

```java
import org.springframework.kafka.annotation.KafkaListener;

public class AtMostOnceConsumer {

    @KafkaListener(topics = "my-topic", groupId = "my-consumer-group")
    public void listen(String message) {
        System.out.println("Received message: " + message);
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è...
        // –°–º–µ—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
    }
}
```

### –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Cloud Stream

```yaml
spring:
  cloud:
    stream:
      bindings:
        input:
          destination: my-topic
          group: my-consumer-group
          content-type: application/json
      kafka:
        binder:
          brokers: localhost:9092
          auto-create-topics: false
```

```java
import org.springframework.cloud.stream.annotation.EnableBinding;
import org.springframework.cloud.stream.annotation.StreamListener;
import org.springframework.messaging.handler.annotation.Payload;
import org.springframework.stereotype.Service;

@Service
@EnableBinding(KafkaProcessor.class)  // –£–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Å –∫–æ—Ç–æ—Ä—ã–º —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å
public class KafkaConsumerService {

    // –ú–µ—Ç–æ–¥ –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞
    @StreamListener("input")
    public void handle(@Payload String message) {
        System.out.println("Received message: " + message);
    }
}
```

```java
import org.springframework.cloud.stream.annotation.Input;
import org.springframework.messaging.SubscribableChannel;

public interface KafkaProcessor {

    @Input("input")  // –ò–º—è –∫–∞–Ω–∞–ª–∞, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤ application.yml
    SubscribableChannel input();
}
```

**At least once**

```yaml
spring:
  cloud:
    stream:
      bindings:
        input:
          destination: my-topic
          group: my-consumer-group
          content-type: application/json
          consumer:
            ackMode: manual  # –†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
            maxAttempts: 3  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
```

```java
import org.springframework.cloud.stream.annotation.EnableBinding;
import org.springframework.cloud.stream.annotation.StreamListener;
import org.springframework.messaging.Message;
import org.springframework.messaging.handler.annotation.Header;
import org.springframework.messaging.simp.SimpMessagingTemplate;
import org.springframework.stereotype.Component;

@Component
@EnableBinding(Sink.class)  // Sink - —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π Binding –¥–ª—è –≤—Ö–æ–¥–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
public class AtLeastOnceConsumer {

    @StreamListener(Sink.INPUT)
    public void handleMessage(Message<String> message, @Header(name = "kafka_offset") String offset) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        System.out.println("Received message: " + message.getPayload());
        // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        // Spring Cloud Stream –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞
        // –±–ª–∞–≥–æ–¥–∞—Ä—è ackMode=manual –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º—É acknowledgment
    }
}
```

**At most once**

```yaml
spring:
  cloud:
    stream:
      bindings:
        input:
          destination: my-topic
          group: my-consumer-group
          content-type: application/json
          consumer:
            ackMode: batch  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–∞–∫–µ—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
```

```java
import org.springframework.cloud.stream.annotation.EnableBinding;
import org.springframework.cloud.stream.annotation.StreamListener;
import org.springframework.messaging.Message;
import org.springframework.stereotype.Component;

@Component
@EnableBinding(Sink.class)
public class AtMostOnceConsumer {

    @StreamListener(Sink.INPUT)
    public void handleMessage(Message<String> message) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        System.out.println("Received message: " + message.getPayload());
        // –°–º–µ—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
    }
}
```

**Mostly Once**

–≠—Ç–æ –≥–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç—Ä–µ–º–∏—Ç—Å—è –±—ã—Ç—å —á–µ–º-—Ç–æ —Å—Ä–µ–¥–Ω–∏–º –º–µ–∂–¥—É At least once –∏ At most once. –û–Ω –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è
–±—É–¥—É—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –æ–±—ã—á–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑, –Ω–æ –∏–Ω–æ–≥–¥–∞, –≤ —Å–ª—É—á–∞–µ —Å–±–æ–µ–≤, –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞. –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
—Ç–∞–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞ –≤ Spring Cloud Stream –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–ª–∏
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π.

–í —Ä–∞–º–∫–∞—Ö Spring Cloud Stream, –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å Mostly Once —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–ª–∏
–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, —á—Ç–æ–±—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

```yaml
spring:
  cloud:
    stream:
      bindings:
        input:
          destination: my-topic
          group: my-consumer-group
          content-type: application/json
          consumer:
            ackMode: manual  # –†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
            maxAttempts: 3  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
```

```java
import org.springframework.cloud.stream.annotation.EnableBinding;
import org.springframework.cloud.stream.annotation.StreamListener;
import org.springframework.messaging.Message;
import org.springframework.messaging.handler.annotation.Header;
import org.springframework.messaging.simp.SimpMessagingTemplate;
import org.springframework.stereotype.Component;

import java.util.HashSet;
import java.util.Set;

@Component
@EnableBinding(Sink.class)
public class MostlyOnceConsumer {

    private Set<String> processedMessageIds = new HashSet<>();

    @StreamListener(Sink.INPUT)
    public void handleMessage(Message<String> message, @Header("messageId") String messageId) {
        if (processedMessageIds.contains(messageId)) {
            System.out.println("Duplicate message: " + messageId);
            return;  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        }
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        System.out.println("Received message: " + message.getPayload());
        // –î–æ–±–∞–≤–ª—è–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ
        processedMessageIds.add(messageId);
        // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
        // Spring Cloud Stream –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞
    }
}
```

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –û—Å–Ω–æ–≤–Ω—ã–µ API Kafka

* Producer API
* Consumer API
* Streams API
* Connector API

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Producer API?

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–æ–ø–∏–∫–∏ Kafka. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π, —Å–∂–∞—Ç–∏–µ–º –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–æ–π 
–Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±—Ä–æ–∫–µ—Ä–∞–º–∏. –ü—Ä–æ–¥—é—Å–µ—Ä —Ç–∞–∫–∂–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å 
–Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –≥–∞—Ä–∞–Ω—Ç–∏–π –¥–æ—Å—Ç–∞–≤–∫–∏.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Consumer API?

–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–æ–ø–∏–∫–æ–≤. –û–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, 
–ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ –≤ Kafka, –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –±—É–¥—å —Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∞–Ω–∞–ª–∏–∑ –∏–ª–∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Connector API?

Connector API –≤ Apache Kafka —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é Kafka Connect, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
–≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º —Å Kafka. Connector API –∏–≥—Ä–∞–µ—Ç –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å –≤ —É–ø—Ä–æ—â–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
–∏ —Å–∏—Å—Ç–µ–º-–ø—Ä–∏–µ–º–Ω–∏–∫–æ–≤ –∫ Kafka, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –Ω–∏–º–∏.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Streams API?

–≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Apache Kafka, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö 
–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ï–≥–æ –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–æ–ª—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–ª–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ª–µ–≥–∫–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å 
–¥–∞–Ω–Ω—ã–µ, –ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ –≤ –≤–∏–¥–µ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –∏–∑ —Ç–æ–ø–∏–∫–æ–≤. Kafka Streams API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è 
–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∞–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –∞–≥—Ä–µ–≥–∞—Ü–∏—è, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Transactions API?

Kafka Transactions API –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–ø–∏–∫–æ–≤. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç exactly-once
–≥–∞—Ä–∞–Ω—Ç–∏—é –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —á–∏—Ç–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–¥–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞ –∏ –ø–∏—à—É—Ç –≤ –¥—Ä—É–≥–æ–π. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ—Ç–æ–∫–æ–≤–æ–π 
–æ–±—Ä–∞–±–æ—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∫–∞–∂–¥–æ–µ –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑, –¥–∞–∂–µ –≤ —Å–ª—É—á–∞–µ —Å–±–æ–µ–≤.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å Quota API?

Quota API –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–≤–æ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã 
–æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è–ª —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –±—Ä–æ–∫–µ—Ä–∞. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ 
–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç–∫–∞–∑–∞ –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å AdminClient API?

AdminClient API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–ø–∏–∫–∞–º–∏, –±—Ä–æ–∫–µ—Ä–∞–º–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ –¥—Ä—É–≥–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ Kafka. 
–ï–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–ø–∏–∫–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞–º–∏ ACL, –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∞—Å—Ç–µ—Ä–µ –∏
–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## Kafka Consumer

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã?

–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç —á–ª–µ–Ω—Å—Ç–≤–æ–º –≤ –≥—Ä—É–ø–ø–∞—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, –Ω–∞–∑–Ω–∞—á–∞–µ—Ç
–ø–∞—Ä—Ç–∏—Ü–∏–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∏–∫—Å–∞—Ü–∏–µ–π —Å–º–µ—â–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ –≥—Ä—É–ø–ø–µ –∏–ª–∏ –ø–æ–∫–∏–¥–∞–µ—Ç –µ–µ,
–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –¥–ª—è –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä—Ç–∏—Ü–∏–π —Å—Ä–µ–¥–∏ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Consumer heartbeat thread?

Consumer Heartbeat Thread –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –±—Ä–æ–∫–µ—Ä—É Kafka (–≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—É –≥—Ä—É–ø–ø—ã).
–≠—Ç–∏ —Å–∏–≥–Ω–∞–ª—ã —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∂–∏–≤ –∏ –≤—Å–µ –µ—â–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –≥—Ä—É–ø–ø—ã –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π. –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç
–¥–∞–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞, –æ–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–∂–∏–≤—ã–º, –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É
–¥–ª—è –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –µ–≥–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –¥—Ä—É–≥–∏–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º –≤ –≥—Ä—É–ø–ø–µ.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫ Kafka –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è?

Kafka –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:
* **Queue**: –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–∏–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–º –≤ –≥—Ä—É–ø–ø–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π. –≠—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç –Ω–∞–ª–∏—á–∏—è
  –≤ –≥—Ä—É–ø–ø–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π.
* **Publish-Subscribe**: –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏. –≠—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç —Ç–æ–≥–æ, —á—Ç–æ –∫–∞–∂–¥—ã–π
  –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–≤–æ–µ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å–µ–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º —á–∏—Ç–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫ Kafka –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –∫–æ–Ω—Å—é–º–µ—Ä–∞?

–ó–∞–¥–µ—Ä–∂–∫–∞ (–ª–∞–≥) –∫–æ–Ω—Å—é–º–µ—Ä–∞ –≤ Kafka –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Ä–∞–∑–Ω–∏—Ü–µ –º–µ–∂–¥—É –æ—Ñ—Ñ—Å–µ—Ç–æ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ—Ñ—Ñ—Å–µ—Ç–æ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ
–ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è. Kafka –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–¥–µ—Ä–∂–µ–∫ –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤ —Ç–∞–∫–∏–µ, –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
–∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ Kafka Consumer Groups –∏ API AdminClient. –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤ –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤. Kafka –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏,
–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã –º–µ—Ç–æ–¥—ã subscribe() –∏ poll()?

–ú–µ—Ç–æ–¥ subscribe() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–ø–∏–∫–æ–≤. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–Ω –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
–ú–µ—Ç–æ–¥ poll(), —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–æ–ø–∏–∫–æ–≤. –û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã
—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Ç–æ–ø–∏–∫–æ–≤ –∏ –ø–∞—Ä—Ç–∏—Ü–∏–π. –ú–µ—Ç–æ–¥ poll() –æ–±—ã—á–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ü–∏–∫–ª–µ –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –º–µ—Ç–æ–¥ position()?

–ú–µ—Ç–æ–¥ position() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–º–µ—â–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è
–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ö–æ–¥–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –º–µ—Ç–æ–¥–æ–º committed(), —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞—Å–∫–æ–ª—å–∫–æ
—Å–∏–ª—å–Ω–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –æ—Ç—Å—Ç–∞–ª –æ—Ç —Å–≤–æ–µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–∏—Ç–∞ –æ—Ñ—Ñ—Å–µ—Ç–∞. –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ü–µ–Ω–Ω–æ–π –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏
—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã –º–µ—Ç–æ–¥—ã commitSync() –∏ commitAsync()?

–≠—Ç–∏ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ —Å–º–µ—â–µ–Ω–∏–π:
* **commitSync()**: —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–º–µ—â–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω–æ–µ poll(). –û–Ω –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–ø—ã—Ç–∫—É –¥–æ —Ç–µ—Ö –ø–æ—Ä,
  –ø–æ–∫–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ –∏–ª–∏ –Ω–µ —Å—Ç–æ–ª–∫–Ω–µ—Ç—Å—è —Å –Ω–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º–æ–π –æ—à–∏–±–∫–æ–π.
* **commitAsync()**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–º–µ—â–µ–Ω–∏—è. –û–Ω –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –ø—Ä–∏ —Å–±–æ–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–º,
  –Ω–æ –º–µ–Ω–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–º, —á–µ–º commitSync(). –í—ã–±–æ—Ä –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é,
  —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î—Ä—É–≥–∏–µ –≤–æ–ø—Ä–æ—Å—ã

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –ø—Ä–æ–¥—é—Å–µ—Ä?

–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –ø—Ä–æ–¥—é—Å–µ—Ä –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç exactly-once –≥–∞—Ä–∞–Ω—Ç–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ Kafka –≤ —Å–ª—É—á–∞–µ 
–ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ, 
–æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –≥–¥–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–≤—è–∑–∏ –∏–ª–∏ —Å–±–æ–∏.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Partitioner?

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Partitioner –≤ Producer API –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤ –∫–∞–∫—É—é –ø–∞—Ä—Ç–∏—Ü–∏—é —Ç–æ–ø–∏–∫–∞ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. Partitioner –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö—ç—à –∫–ª—é—á–∞ (–µ—Å–ª–∏ –æ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç) –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –∫–ª—é—á–æ–º –≤—Å–µ–≥–¥–∞
–æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–∞—Ä—Ç–∏—Ü–∏—é. –ú–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ Partitioner –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
—Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏–ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Broker log cleaner thread?

–ü–æ—Ç–æ–∫ –æ—á–∏—Å—Ç–∫–∏ –∂—É—Ä–Ω–∞–ª–∞ –≤ Kafka –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∂–∞—Ç–∏—è –∂—É—Ä–Ω–∞–ª–∞. –°–∂–∞—Ç–∏–µ –∂—É—Ä–Ω–∞–ª–∞ - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º Kafka 
—É–¥–∞–ª—è–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø–∏—Å–∏, —Å–æ—Ö—Ä–∞–Ω—è—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è 
—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è changelog –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ—á–∏—Å—Ç–∫–∏ –∂—É—Ä–Ω–∞–ª–æ–≤ 
–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–ª—è —Å–∂–∞—Ç–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Kafka Mirror Maker?

–≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ Kafka, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–∞—Ö.
–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç—Ä–µ–±–ª—è—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—è –≤ –¥—Ä—É–≥–æ–π. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö, 
–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–æ–≤ –≤ –µ–¥–∏–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–ª–∏ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ Schema Registry?

Kafka Schema Registry –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç RESTful –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ö–µ–º Avro. Schema Registry –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
—Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å Kafka –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏ –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ
–ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –æ–±—Ä–∞—Ç–Ω—É—é –∏ –ø—Ä—è–º—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Streams DSL?

Kafka Streams DSL –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –æ–ø–∏—Å—ã–≤–∞—Ç—å 
—Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Ç–∞–∫—É—é –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö. DSL –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç 
–º–Ω–æ–≥–∏–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –¥–µ—Ç–∞–ª–∏ –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, —É–ø—Ä–æ—â–∞—è —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫ Kafka –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π?

–°–∞–º–∞ –ø–æ —Å–µ–±–µ Kafka –Ω–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞–ø—Ä—è–º—É—é, –Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å 
—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏. –û–¥–Ω–∏–º –∏–∑ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—è –≤–µ—Ä—Å–∏–∏ –≤ —Å—Ö–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—è. –î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á 
—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–µ—Å—Ç—Ä—ã —Å—Ö–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, Confluent Schema Registry), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å—Ö–µ–º—ã –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –ö–∞–∫ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±—Ä–æ–∫–µ—Ä–∞?

Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pull-–º–æ–¥–µ–ª—å –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —É –±—Ä–æ–∫–µ—Ä–æ–≤, –∞ –Ω–µ –±—Ä–æ–∫–µ—Ä—ã 
–æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å, —Å –∫–æ—Ç–æ—Ä–æ–π –æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è. 
–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –±—Ä–æ–∫–µ—Ä–∞, —É–∫–∞–∑—ã–≤–∞—è —Ç–æ–ø–∏–∫, –ø–∞—Ä—Ç–∏—Ü–∏—é –∏ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏. 
–ë—Ä–æ–∫–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Å –æ–±—ä–µ–º–æ–º –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞ –≤ –±–∞–π—Ç–∞—Ö.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Kafka Streams –∏ Apache Flink?

Kafka Streams –∏ Apache Flink ‚Äî —ç—Ç–æ –¥–≤–∞ –º–æ—â–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ
–æ–Ω–∏ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Kafka Streams –∏ Apache Flink

| **–ö—Ä–∏—Ç–µ—Ä–∏–π**           | **Kafka Streams**                           | **Apache Flink**                        |
|------------------------|---------------------------------------------|-----------------------------------------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**         | –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, —Ä–∞–±–æ—Ç–∞—é—â–∞—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç Kafka. | –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ –ø—Ä–∏–µ–º–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**    | –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Ç–æ–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑ Kafka. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π. | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –ø–æ—Ç–æ–∫–æ–≤—É—é (streaming), —Ç–∞–∫ –∏ –ø–∞–∫–µ—Ç–Ω—É—é (batch) –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–ª–æ–∂–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–±—ã—Ç–∏–π —Å –≥–∏–±–∫–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Kafka**| –ü–æ—Å—Ç—Ä–æ–µ–Ω–∞ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∫—Ä—É–≥ Kafka. –¢—Ä–µ–±—É–µ—Ç Kafka –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö. | –†–∞–±–æ—Ç–∞–µ—Ç —Å —à–∏—Ä–æ–∫–∏–º —Å–ø–µ–∫—Ç—Ä–æ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (Kafka, HDFS, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç. –¥.). Kafka ‚Äî –ª–∏—à—å –æ–¥–∏–Ω –∏–∑ –º–Ω–æ–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. |
| **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**          | –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ Java/Scala-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞. –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤. | –¢—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —á—Ç–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º. |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º** | –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º RocksDB, —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è. | –ò–º–µ–µ—Ç —Ä–∞–∑–≤–∏—Ç—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö. |
| **–ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏**   | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç "at-least-once" –∏ "exactly-once" —Å–µ–º–∞–Ω—Ç–∏–∫—É, –∫–æ–≥–¥–∞ Kafka –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º. | –ò–º–µ–µ—Ç –≥–∏–±–∫–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ "exactly-once", "at-least-once" –∏ "at-most-once". |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**    | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–º–µ—Å—Ç–µ —Å Kafka-–ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏. –ö–∞–∂–¥–∞—è –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è Kafka –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–≤–æ—é –ø–∞—Ä—Ç–∏—Ü–∏—é. | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∑–∞–¥–∞—á (task), —Å –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π –º–æ–¥–µ–ª—å—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏. |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π**   | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π —Å –Ω–∏–∑–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏. | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–ª–æ–∂–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–±—ã—Ç–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ windowing, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞ —Å –∏–∑–º–µ–Ω—è—é—â–∏–º—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. |
| **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ API**   | –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –ø—Ä–æ—Å—Ç—ã–º–∏ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –º–∞–ø–ø–∏–Ω–≥, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤, windowing. | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –±–æ–≥–∞—Ç—ã–º–∏ API –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è –ø–æ—Ç–æ–∫–æ–≤—É—é –∏ –ø–∞–∫–µ—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É, –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–ª–æ–∂–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤. |
| **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º**| –ú–µ–Ω–µ–µ —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∞, —Ç–∞–∫ –∫–∞–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞. –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–º–∫–∞—Ö JVM-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. | –¢—Ä–µ–±—É–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏—Ö –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, —Ç–∞–∫ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é —Å—Ç–µ–ø–µ–Ω—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞. |

### –ö–æ–≥–¥–∞ –≤—ã–±—Ä–∞—Ç—å Kafka Streams
- –ï—Å–ª–∏ –≤—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Kafka –∏ –≤–∞–º –Ω—É–∂–Ω–∞ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- –î–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –Ω–∏–∑–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ Kafka –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±—ã—Å—Ç—Ä–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏.
- –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –≤—Å—Ç—Ä–æ–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é Java/Scala –ø—Ä–æ–≥—Ä–∞–º–º—É –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤.

### –ö–æ–≥–¥–∞ –≤—ã–±—Ä–∞—Ç—å Apache Flink
- –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –ø–æ—Ç–æ–∫–æ–≤–æ–π –∏ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –ø—Ä–∏–µ–º–Ω–∏–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ Kafka, –Ω–æ –∏ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, HDFS, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö).
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫–æ–Ω, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤.
- –ï—Å–ª–∏ –≤–∞—à –ø—Ä–æ–µ–∫—Ç —Ç—Ä–µ–±—É–µ—Ç –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≥–∏–±–∫–æ—Å—Ç–∏, —Ç–æ—á–Ω—ã—Ö –≥–∞—Ä–∞–Ω—Ç–∏–π –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
- **Kafka Streams** ‚Äî —ç—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä, –µ—Å–ª–∏ –≤–∞—à–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∂–µ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ Kafka, –∏ –≤–∞–º –Ω—É–∂–Ω–∞ –±—ã—Å—Ç—Ä–∞—è –∏ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
- **Apache Flink** ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á, –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ
  –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–ª–æ–∂–Ω—ã—Ö —Å—Ö–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Kafka Consumer –∏ Kafka Stream?

**Kafka Consumer** - —ç—Ç–æ –∫–ª–∏–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–æ–ø–∏–∫–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –Ω–µ–∫–æ—Ç–æ—Ä—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è
–ø—Ä–æ—Å—Ç—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. **Kafka Stream**, —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –±–æ–ª–µ–µ –ø–æ–¥–≤–∏–Ω—É—Ç—ã–π –∫–ª–∏–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å,
–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏ –∫–ª–∞—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ Kafka. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç DSL –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫
—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Kafka –∏ Flume?

**Apache Kafka** –∏ **Apache Flume** ‚Äî —ç—Ç–æ –¥–≤–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, –æ–¥–Ω–∞–∫–æ –æ–Ω–∏ –∏–º–µ—é—Ç 
—Ä–∞–∑–Ω—ã–µ —Ü–µ–ª–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏:

### 1. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**
- **Kafka**: –≠—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å 
–∏ –Ω–∏–∑–∫—É—é –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö. Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ 
–¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –û–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ª–æ–≥–æ–≤, —Å–æ–±—ã—Ç–∏–π, –º–µ—Ç—Ä–∏–∫ –∏ –¥—Ä—É–≥–∏—Ö –¥–∞–Ω–Ω—ã—Ö, —Ç—Ä–µ–±—É—é—â–∏—Ö 
–≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏.
- **Flume**: –≠—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–±–æ—Ä–∞, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –ª–æ–≥–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π. Flume –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è 
–¥–æ—Å—Ç–∞–≤–∫–∏ –ª–æ–≥–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ HDFS, HBase –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –ï–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö 
–∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥-—Ñ–∞–π–ª–æ–≤) –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –∏—Ö –≤ —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

### 2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- **Kafka**: –í Kafka –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–æ–ø–∏–∫–∏ –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏. 
Kafka –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å. –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ 
—Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
- **Flume**: Flume —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (sources)**, **–∫–∞–Ω–∞–ª–æ–≤ (channels)** –∏ **–ø—Ä–∏–µ–º–Ω–∏–∫–æ–≤ (sinks)**. –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç 
–¥–∞–Ω–Ω—ã–µ, –∫–∞–Ω–∞–ª –∏—Ö –±—É—Ñ–µ—Ä–∏–∑—É–µ—Ç, –∞ –ø—Ä–∏–µ–º–Ω–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –∫–æ–Ω–µ—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É. Flume –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É "event-based" –∏ —á–∞—Å—Ç–æ 
–ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤.

### 3. **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
- **Kafka**: Kafka —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –¥–æ 7 –¥–Ω–µ–π) –≤ —Ç–æ–ø–∏–∫–∞—Ö. 
–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏, –∏ Kafka –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é **—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö**.
- **Flume**: Flume –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è. –û–Ω –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ 
—Ö—Ä–∞–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, HDFS). –î–∞–Ω–Ω—ã–µ –≤ Flume –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–æ–ª–≥–æ, –∏ –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞, –æ–Ω–∏ —Ç–µ—Ä—è—é—Ç—Å—è.

### 4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- **Kafka**: Kafka –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤—ã—Å–æ–∫–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –û–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∫–∞–∫ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º, 
—Ç–∞–∫ –∏ –ø–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º, –∏ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.
- **Flume**: Flume –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Kafka –∏ –±–æ–ª—å—à–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–±–æ—Ä –ª–æ–≥–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π 
—Å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. –•–æ—Ç—è Flume —Ç–æ–∂–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö, –æ–Ω –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å 
—Ç–∞–∫–∏–º–∏ –±–æ–ª—å—à–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏, –∫–∞–∫ Kafka.

### 5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –∫–µ–π—Å—ã**
- **Kafka**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, —Ä–∞–±–æ—Ç—ã —Å 
–±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
- **Flume**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∞, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –ª–æ–≥–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π –≤ —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ HDFS, HBase, 
–∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

### 6. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- **Kafka**: Kafka –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —à–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è 
—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π.
- **Flume**: Flume –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Hadoop-—ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π, –∏ –æ—Å–Ω–æ–≤–Ω–æ–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å HDFS, 
HBase –∏ –¥—Ä—É–≥–∏–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —ç—Ç–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ.

### 7. **–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∞—è –º–æ–¥–µ–ª—å**
- **Kafka**: Kafka –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏–∑ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Ç–æ–ø–∏–∫–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –∞ —Ç–∞–∫–∂–µ 
–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**.
- **Flume**: Flume –∏–º–µ–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ö–µ–º—É –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–∫—É—é –≥–∏–±–∫–æ—Å—Ç—å, –∫–∞–∫ Kafka –≤ —á–∞—Å—Ç–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏.

### 8. **–ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏**
- **Kafka**: Kafka –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≥–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏** —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (acknowledgment), –∞ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç 
–æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å **–¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–æ—á–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑** (exactly-once semantics).
- **Flume**: Flume –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏, –Ω–æ –æ–Ω–∏ –º–µ–Ω–µ–µ —Å—Ç—Ä–æ–≥–∏–µ, —á–µ–º —É Kafka, –∏ –±–æ–ª—å—à–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ 
—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º, –∞ –Ω–µ –Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É.

[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)

## –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Kafka –∏ RabbitMQ?

**RabbitMQ** –∏ **Apache Kafka** ‚Äî —ç—Ç–æ –¥–≤–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç —Å–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ 
–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏:

### 1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- **RabbitMQ** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**. –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å, –∏ –æ–¥–∏–Ω –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ 
–∏–∑ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.
- **Apache Kafka** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç–æ–ø–∏–∫–∏ –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏**. –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–æ–ø–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ 
–ø–∞—Ä—Ç–∏—Ü–∏–∏, –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ. Kafka –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –±–æ–ª—å—à–∏–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å.

### 2. **–ú–æ–¥–µ–ª—å –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**
- **RabbitMQ**: –°–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏, –∏ –∫–∞–∂–¥—ã–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –°–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å 
–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã (acknowledged) –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã (rejected). RabbitMQ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–º—É –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—é.
- **Kafka**: –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–æ–ø–∏–∫–∞—Ö –Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫, –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏—Ö –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ. Kafka 
–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º, –µ—Å–ª–∏ –æ–Ω–∏ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ —Ç–æ–ø–∏–∫, –∏ –º–æ–∂–µ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

### 3. **–ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏**
- **RabbitMQ**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª 
–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏–µ. –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞ —Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π).
- **Kafka**: –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º —Å—á–∏—Ç—ã–≤–∞—Ç—å –∏—Ö –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. Kafka –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç 
–¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.

### 4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- **RabbitMQ**: –õ—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –∏ —Å—Ä–µ–¥–Ω–∏—Ö —Å–∏—Å—Ç–µ–º, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã—Å–æ–∫–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞. 
–û–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–∏–ª–∏–π –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
- **Kafka**: –û—Ç–ª–∏—á–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–æ–π **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é** –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö. Kafka –ª–µ–≥–∫–æ 
–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç **–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

### 5. **–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∞—è –º–æ–¥–µ–ª—å**
- **RabbitMQ**: –û–¥–∏–Ω –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.
- **Kafka**: –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. Kafka —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫–∞—Ö, 
–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏—Ö –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. Kafka —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é **–≥—Ä—É–ø–ø –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π**, –≥–¥–µ –∫–∞–∂–¥—ã–π 
–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –≥—Ä—É–ø–ø—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏.

### 6. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –∫–µ–π—Å—ã**
- **RabbitMQ**: –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏, 
–±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –æ—á–µ—Ä–µ–¥—è–º–∏ –∑–∞–¥–∞—á.
- **Kafka**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∑–∞–ø–∏—Å–∏ –∂—É—Ä–Ω–∞–ª–æ–≤, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, 
–æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

### 7. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏**
- **RabbitMQ**: –û–¥–∏–Ω –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—å, –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.
- **Kafka**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫–∏, –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏—Ö 
–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å.

### 8. **–°–æ–æ–±—â–µ–Ω–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**
- **RabbitMQ**: –°–æ–æ–±—â–µ–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –ø–æ—Å–ª–µ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–º. –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–±—ã—á–Ω–æ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ.
- **Kafka**: –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ –≤ —Ç–æ–ø–∏–∫–∞—Ö –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –∏—Å—Ç–µ—á–µ—Ç —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏). 
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

–û—Ç–ª–∏—á–Ω–æ ‚Äî —Å–æ–±–µ—Ä—É –¥–ª—è —Ç–µ–±—è **–ø–æ–ª–Ω—ã–π, —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π, –Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –ø–ª–∞–Ω** –ø–æ Apache Kafka, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–∂a–≤–∞-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏. –Ø –æ–±—ä—è—Å–Ω—é –Ω–µ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Ç–∞–∫–æ–µ –∏ –∑–∞—á–µ–º, –Ω–æ –∏ **—Ç–æ–Ω–∫–∏–µ** –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, —Ö–∏—Ç—Ä—ã–µ –∫–µ–π—Å—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ã—á–Ω–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä–≤—å—é. –¢–µ–∫—Å—Ç –¥–ª–∏–Ω–Ω—ã–π –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π ‚Äî –±–µ—Ä–∏ –±–ª–æ–∫–Ω–æ—Ç. –ü–æ–µ—Ö–∞–ª–∏.

# 1. –ö—Ä–∞—Ç–∫–∏–π ¬´–Ω–∞ –ø–∞–ª—å—Ü–∞—Ö¬ª –æ–±–∑–æ—Ä (—á—Ç–æ —Ç–∞–∫–æ–µ Kafka)
Apache Kafka ‚Äî —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (distributed streaming platform). –û—Å–Ω–æ–≤–Ω—ã–µ –µ—ë —Ä–æ–ª–∏:
- –ë—É—Ñ–µ—Ä/—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–∫–∞–∫ –æ—á–µ—Ä–µ–¥—å, –Ω–æ –±–æ–ª–µ–µ –º–æ—â–Ω–∞—è).
- –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ–±—ã—Ç–∏–π (log) ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ —Ç–æ–ø–∏–∫–∞–º/–ø–∞—Ä—Ç–∏—Ü–∏—è–º –∏ –∏–º–µ—é—Ç –æ—Ñ—Å–µ—Ç—ã.
- –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (Kafka Streams, ksqlDB).

–ö–ª—é—á–µ–≤–∞—è –º—ã—Å–ª—å: Kafka —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Ç–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –≤–∏–¥–µ **–Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–≥–æ –ª–æ–≥–∞**, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –Ω–∞ **—Ç–æ–ø–∏–∫–∏**, –∞ —Ç–æ–ø–∏–∫–∏ ‚Äî –Ω–∞ **–ø–∞—Ä—Ç–∏—Ü–∏–∏**. –ü–∞—Ä—Ç–∏—Ü–∏—è ‚Äî —ç—Ç–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π –ª–æ–≥ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ —Ä–∞—Å—Ç—É—â–∏–º–∏ **offset** (–∏–Ω–¥–µ–∫—Å–∞–º–∏).

---

# 2. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –∏ —Ç–µ—Ä–º–∏–Ω—ã (—Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º)

**Broker** ‚Äî —Å–µ—Ä–≤–µ—Ä Kafka. –ö–ª–∞—Å—Ç–µ—Ä ‚Äî –Ω–∞–±–æ—Ä –±—Ä–æ–∫–µ—Ä–æ–≤.  
**Topic** ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è/–∫–∞–Ω–∞–ª —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `orders`).  
**Partition** ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å —Ç–æ–ø–∏–∫–∞; —É –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ ‚Äî —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π –ª–æ–≥ –∏ –æ—Ñ—Å–µ—Ç—ã.  
**Offset** ‚Äî —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ ‚Äî –ø–æ–∑–∏—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏. Offset —É–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏.  
**Producer** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–∏—à–µ—Ç (–ø—É–±–ª–∏–∫—É–µ—Ç) —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫.  
**Consumer** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —á–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Ç–æ–ø–∏–∫–∞.  
**Consumer Group** ‚Äî –≥—Ä—É–ø–ø–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —á–∏—Ç–∞—é—Ç —Ç–æ–ø–∏–∫: –∫–∞–∂–¥—ã–π –ø–∞—Ä—Ç–∏—Ü–∏—è –≤ –≥—Ä—É–ø–ø–µ —á–∏—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º consumer'–æ–º –∏–∑ –≥—Ä—É–ø–ø—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ.  
**Leader / Follower (—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è)** ‚Äî –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ –æ–¥–∏–Ω –±—Ä–æ–∫–µ—Ä ‚Äî –ª–∏–¥–µ—Ä (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏–µ), –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî followers ‚Äî —Ä–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç –∂—É—Ä–Ω–∞–ª –ª–∏–¥–µ—Ä–∞.  
**ISR (In-Sync Replicas)** ‚Äî –Ω–∞–±–æ—Ä —Ä–µ–ø–ª–∏–∫, –∫–æ—Ç–æ—Ä—ã–µ —É—Å–ø–µ–≤–∞—é—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã).  
**Replication factor** ‚Äî —Å–∫–æ–ª—å–∫–æ –∫–æ–ø–∏–π –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ‚â•2, –æ–±—ã—á–Ω–æ 3).  
**min.insync.replicas** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Ä–µ–ø–ª–∏–∫ –∏–∑ ISR, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å –ø—Ä–∏ `acks=all`, –∏–Ω–∞—á–µ –∑–∞–ø–∏—Å—å –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è ‚Äî —ç—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä—å –¥–∞–Ω–Ω—ã—Ö.  
**acks** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä –ø—Ä–æ–¥—é—Å–µ—Ä–∞, —Å–∫–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –Ω—É–∂–Ω–æ –æ—Ç –±—Ä–æ–∫–µ—Ä–æ–≤: `0`, `1`, `all` (–∏–ª–∏ `-1` ‚Äî —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç `all`).  
**Retention** ‚Äî –≤—Ä–µ–º—è (–∏–ª–∏ —Ä–∞–∑–º–µ—Ä) —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä `retention.ms`).  
**Cleanup policy** ‚Äî `delete` (–ø–æ –≤—Ä–µ–º–µ–Ω–∏/—Ä–∞–∑–º–µ—Ä—É) –∏–ª–∏ `compact` (–∫–æ–º–ø–∞–∫—Ç–∏–∑–∞—Ü–∏—è –ø–æ –∫–ª—é—á—É ‚Äî useful –¥–ª—è storage of latest state).  
**Consumer offset commit** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —á—Ç–µ–Ω–∏—è (–∫—É–¥–∞ consumer —É–∂–µ –¥–æ—à—ë–ª). –•—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º —Ç–æ–ø–∏–∫–µ `__consumer_offsets`.  
**Transaction / Idempotence** ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥—É–±–ª–µ–π –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ ¬´exactly-once¬ª –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.  

---

# 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è ‚Äî –∫—Ç–æ —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∏ –∫–∞–∫
**–ó–∞–ø–∏—Å—å (Producer ‚Üí Broker):**
- Producer —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `ProducerRecord(topic, key?, value)` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `send()`.
- –ü–æ –∫–ª—é—á—É (–µ—Å–ª–∏ –µ—Å—Ç—å) –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–∞—Ä—Ç–∏—Ü–∏—è: `partition = hash(key) % numPartitions`. –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è partitioner (–≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö ‚Äî sticky partitioner –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–∞—Ç—á–∏–Ω–≥–∞; —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ round-robin).
- Producer –±—É—Ñ–µ—Ä–∏–∑—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±–∞—Ç—á–∏ (RecordAccumulator) –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏, –ø–æ—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –ª–∏–¥–µ—Ä–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏.
- Leader –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Å–≤–æ–π —Å–µ–≥–º–µ–Ω—Ç –ª–æ–≥–æ–≤ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç producer'—É —Å–æ–≥–ª–∞—Å–Ω–æ `acks`.
- Follower'—ã –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Ç—è–Ω—É—Ç (fetch) —É –ª–∏–¥–µ—Ä–∞ –∏ —Ä–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç –∑–∞–ø–∏—Å–∏.

**–ß—Ç–µ–Ω–∏–µ (Broker ‚Üí Consumer):**
- Consumer (–≤ –≥—Ä—É–ø–ø–µ) –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–ø–∏–∫. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã (broker) —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—Ç–∏–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π –º–µ–∂–¥—É consumer'–∞–º–∏ (assignment).
- Consumer –≤—ã–∑—ã–≤–∞–µ—Ç `poll()` ‚Äî –±—Ä–æ–∫–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π –Ω–∞—á–∏–Ω–∞—è —Å –∏—Ö –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞ –æ—Ñ—Å–µ—Ç–∞.
- –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ consumer –º–æ–∂–µ—Ç `commit` –æ—Ñ—Å–µ—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é).

---

# 4. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è, –ª–∏–¥–µ—Ä—ã –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö ‚Äî —á—Ç–æ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å
- –î–ª—è –ø–∞—Ä—Ç–∏—Ü–∏–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è replication factor (–æ–±—ã—á–Ω–æ 3). –û–¥–∏–Ω –∏–∑ –±—Ä–æ–∫–µ—Ä–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **leader**, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî **followers**.
- –í—Å–µ –∑–∞–ø–∏—Å–∏ –∏–¥—É—Ç –Ω–∞ **–ª–∏–¥–µ—Ä–∞**; followers —Ç—è–Ω—É—Ç –¥–∞–Ω–Ω—ã–µ –∏ —Ä–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç. Broker –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ISR ‚Äî —Ç–µ—Ö, –∫—Ç–æ —É—Å–ø–µ–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è.
- –ï—Å–ª–∏ –ª–∏–¥–µ—Ä —É–ø–∞–ª, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **election** ‚Äî –Ω–æ–≤—ã–π –ª–∏–¥–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ ISR. –ï—Å–ª–∏ ISR –ø—É—Å—Ç –∏–ª–∏ `unclean.leader.election.enable=true`, –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ä–µ–ø–ª–∏–∫—É ‚Üí –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö.
- –ß—Ç–æ–±—ã **–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∑–∞–ø–∏—Å—å —É—Ö–æ–¥–∏—Ç –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–ª–∏–∫**, –∏—Å–ø–æ–ª—å–∑—É–µ–º `acks=all` —É –ø—Ä–æ–¥—é—Å–µ—Ä–∞ –∏ `min.insync.replicas` > 1. –¢–æ–≥–¥–∞ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ª–∏–¥–µ—Ä–∞, –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ–ø–ª–∏–∫ –≤ ISR ‚Äî –∑–∞–ø–∏—Å—å –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞, –∏ –ø—Ä–æ–¥—é—Å–µ—Ä —É–≤–∏–¥–∏—Ç –æ—à–∏–±–∫—É.
- –ï—Å–ª–∏ `acks=1` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –∑–∞–ø–∏—Å—å —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ —É –ª–∏–¥–µ—Ä–∞ ‚Äî followers –º–æ–≥—É—Ç –µ—â—ë –Ω–µ —É—Å–ø–µ—Ç—å ‚Üí —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ª–∏–¥–µ—Ä–∞.

---

# 5. –ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏: at-most-once, at-least-once, exactly-once (–∏ –∫–∞–∫ –∏—Ö –¥–æ–±–∏—Ç—å—Å—è)

**At-most-once (–Ω–µ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞)**  
- –ö–æ–º–º–∏—Ç –æ—Ñ—Å–µ—Ç–∞ **–¥–æ** –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–ª–∏ auto-commit –≤–∫–ª—é—á—ë–Ω –∏ commit –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–∞—Å—Ç–æ.  
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –µ—Å–ª–∏ —á—Ç–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø–∞–ª–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã (–Ω–µ –±—É–¥—É—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã).  
- –ö–∞–∫ –¥–æ–±–∏—Ç—å—Å—è: `enable.auto.commit = true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –ª–∏–±–æ –¥–µ–ª–∞—Ç—å `commitSync()` –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π.

**At-least-once (–∫–∞–∫ –º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –≤–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏)**  
- –ö–æ–º–º–∏—Ç –æ—Ñ—Å–µ—Ç–∞ **–ø–æ—Å–ª–µ** —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.  
- –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø–∞–ª–æ –¥–æ –∫–æ–º–º–∏—Ç–∞ ‚Äî –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ consumer –ø—Ä–æ—á–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–Ω–æ–≤–∞ ‚Üí –¥—É–±–ª–∏–∫–∞—Ç –≤–æ–∑–º–æ–∂–µ–Ω.  
- –ö–∞–∫ –¥–æ–±–∏—Ç—å—Å—è: `enable.auto.commit=false` –∏ `commitSync()` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ü—Ä–æ–¥—é—Å–µ—Ä –ø—Ä–∏ `acks=all` –∏ retries –ø–æ–º–æ–≥–∞–µ—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä–∏, –Ω–æ –¥—É–±–ª–∏ –≤–æ–∑–º–æ–∂–Ω—ã.

**Exactly-once (—Ç–æ—á–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑)**  
- –°–ª–æ–∂–Ω–µ–µ; –≤ Kafka —ç—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –ø—Ä–æ–¥—é—Å–µ—Ä** –∏ **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** (EOS ‚Äî exactly-once semantics).  
- Producer: `enable.idempotence=true` (–≤ –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é), `transactional.id` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.  
- –ü–æ—Ç–æ—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å "consume ‚Üí produce" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: –Ω–∞—á–Ω–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –ø—Ä–æ—á–∏—Ç–∞–π, –æ–±—Ä–∞–±–æ—Ç–∞–π, –æ—Ç–ø—Ä–∞–≤—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤—ã–∑–æ–≤–∏ `sendOffsetsToTransaction()` —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å offset-commit –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –∑–∞—Ç–µ–º `commitTransaction()`. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ª–∏–±–æ –≤—Å—ë (–≤–∫–ª—é—á–∞—è –æ—Ñ—Å–µ—Ç—ã) –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ, –ª–∏–±–æ –Ω–∏—á–µ–≥–æ ‚Äî –∏ –ø—Ä–∏ restart –Ω–µ –±—É–¥–µ—Ç –¥—É–±–ª–µ–π.  
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±—Ä–æ–∫–µ—Ä–æ–º; —Å–ª–æ–∂–Ω–µ–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏; –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∏ operational costs.

**–ß—Ç–æ —ç—Ç–æ:** Exactly-once (EOS) ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç—Å—è –∏ –∑–∞–ø–∏—à–µ—Ç—Å—è **—Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑** –≤ end-to-end —Ü–∏–∫–ª–µ "read-process-write". –í Kafka —ç—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —Å–æ—á–µ—Ç–∞–Ω–∏–µ–º *–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö* –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.  

---

## –ë—ã—Å—Ç—Ä—ã–µ —à–∞–≥–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è EOS

1. **–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ (Producer):**
   - –í–∫–ª—é—á–∏—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:
     ```properties
     enable.idempotence=true
     ```
   - –ó–∞–¥–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π transactional id:
     ```properties
     transactional.id=my-producer-1
     ```
   - –í –∫–æ–¥–µ (Java):
     ```java
     producer.initTransactions();
     producer.beginTransaction();
     // send messages
     producer.sendOffsetsToTransaction(offsets, consumerGroupMetadata);
     producer.commitTransaction();
     // –∏–ª–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ: producer.abortTransaction();
     ```

2. **–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è (Consumer), —á—Ç–æ–±—ã –Ω–µ –≤–∏–¥–µ—Ç—å –Ω–µ–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   ```properties
   isolation.level=read_committed
   enable.auto.commit=false
   ```

3. **–î–ª—è Kafka Streams:** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `processing.guarantee=exactly_once_v2` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Streams (—Ç—Ä–µ–±—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏ –±—Ä–æ–∫–µ—Ä–∞).  

4. **–ë—Ä–æ–∫–µ—Ä—ã/–∫–ª–∞—Å—Ç–µ—Ä—ã:** –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ç–µ–º–∞ `__transaction_state` –±—ã–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∞ (–ø–æ–¥—Ö–æ–¥—è—â–∏–π replication.factor –∏ min.insync.replicas), —Ç.–∫. —Ç—É–¥–∞ –ø–∏—à–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –≤–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `rebase` –Ω–∞ –ø—Ä–æ–¥—é—Å–µ—Ä–∞—Ö? (–æ–ø–µ—á–∞—Ç–∫–∞) ‚Äî –Ω–µ—Ç: –æ—Å–Ω–æ–≤–Ω–∞—è –æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (–ë–î) ‚Äî –Ω—É–∂–Ω–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏/–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å.
- Rebalance/—Å–±–æ–∏ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `transaction.state.log.*` –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ EOS –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞—Ç—å ‚â•3 –±—Ä–æ–∫–µ—Ä–æ–≤ (–æ–±—ã—á–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ –ª–æ–≥–∞).
- EOS —Ä–µ—à–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ Kafka (—á—Ç–µ–Ω–∏–µ ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Äî –∑–∞–ø–∏—Å—å) –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API; –æ–Ω–æ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–º–∏.

---

## –ö–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ EOS –≤ Kafka ‚Äî Confluent blog / Kafka docs.  
- Producer API: `initTransactions`, `sendOffsetsToTransaction`, `commitTransaction`.  
- Streams: `processing.guarantee=exactly_once_v2`.  
(–°—Å—ã–ª–∫–∏ –∏ —Ç–æ—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–º. –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.)


---

# 6. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–¥—é—Å–µ—Ä–∞ (–≤–∞–∂–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∏ –∑–∞—á–µ–º –æ–Ω–∏)

- `acks=0|1|all` ‚Äî –∫–∞–∫ –º–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –∂–¥–∞—Ç—å. `all` —Å `min.insync.replicas` –¥–∞—ë—Ç –ª—É—á—à–µ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ.
- `retries` ‚Äî —á–∏—Å–ª–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ. –í–∫—É–ø–µ —Å `enable.idempotence` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏.
- `enable.idempotence=true` ‚Äî –≤–∫–ª. –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: producer –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç sequence per partition, –±—Ä–æ–∫–µ—Ä –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç –¥—É–±–ª–∏. –¢—Ä–µ–±—É–µ—Ç `max.in.flight.requests.per.connection` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∏–∂–µ).
- `max.in.flight.requests.per.connection` ‚Äî —Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø–æ–ª—ë—Ç–µ. –ï—Å–ª–∏ >1 + retries >0 –∏ idempotence –≤—ã–∫–ª—é—á–µ–Ω ‚Äî –≤–æ–∑–º–æ–∂–Ω–∞ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ retry; —Å idempotence –≤–∫–ª—é—á—ë–Ω–Ω—ã–º Kafka –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –¥–∞–∂–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ in-flight, –Ω–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª–æ—Å—å –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ 1 –¥–ª—è —Å—Ç—Ä–æ–≥–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞.
- `linger.ms` ‚Äî –∂–¥–∞—Ç—å –ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞—Ç—á–∞ –¥–ª—è –ª—É—á—à–µ–≥–æ throughput.
- `batch.size` ‚Äî —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –≤ –±–∞–π—Ç–∞—Ö.
- `compression.type` ‚Äî gzip, snappy, lz4, zstd ‚Äî —ç–∫–æ–Ω–æ–º—è—Ç —Å–µ—Ç—å/–¥–∏—Å–∫.
- `transactional.id` ‚Äî –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `transactional.id` –Ω–∞ –ø—Ä–æ–¥—é—Å–µ—Ä–µ.

**–í–∞–∂–Ω–æ –ø—Ä–æ –ø–æ—Ä—è–¥–æ–∫ –∏ –¥—É–±–ª–∏ –ø—Ä–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–µ:**
- –ü–æ—Ä—è–¥–æ–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è **–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏**.
- –ï—Å–ª–∏ —É —Ç–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ in-flight –∑–∞–ø—Ä–æ—Å–æ–≤, retries –∏ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ. –° `enable.idempotence=true` –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π –±—Ä–æ–∫–µ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π –ø–æ—Ä—è–¥–æ–∫ –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç—Å—è —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –Ω–æ –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –≤–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –±—Ä–æ–∫–µ—Ä–∞.

---

# 7. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Å—å—é–º–µ—Ä–∞ (–≤–∞–∂–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∏ –∑–∞—á–µ–º –æ–Ω–∏)

- `group.id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä consumer group.
- `enable.auto.commit` ‚Äî –µ—Å–ª–∏ true ‚Äî Kafka –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ–∫–æ–º–º–∏—Ç–∏—Ç—å –æ—Ñ—Å–µ—Ç—ã (–Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–π).
- `auto.commit.interval.ms` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –∞–≤—Ç–æ–∫–æ–º–º–∏—Ç–∞.
- `auto.offset.reset` ‚Äî –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ—Ñ—Å–µ—Ç–∞ –Ω–µ—Ç: `latest` (–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ), `earliest` (–ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å—ë —Å –Ω–∞—á–∞–ª–∞).
- `max.poll.records` ‚Äî —Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `poll()` (–≤–∞–∂–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –¥–ª—è `max.poll.interval.ms`).
- `session.timeout.ms` –∏ `heartbeat.interval.ms` ‚Äî –º–µ—Ö–∞–Ω–∏–∫–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ –ø–∞–¥–µ–Ω–∏—è consumer'–∞; –µ—Å–ª–∏ heartbeat –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π `session.timeout.ms`, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å—á–∏—Ç–∞–µ—Ç consumer –º—ë—Ä—Ç–≤ –∏ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç —Ä–µ–±–∞–ª–∞–Ω—Å.
- `max.poll.interval.ms` ‚Äî –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø–∏—Å–∏ –∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç `poll()` –≤ —Ç–µ—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ consumer ¬´—É–ø–æ–ª–∑¬ª, –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–±–∞–ª–∞–Ω—Å.
- `isolation.level` ‚Äî `read_uncommitted` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ `read_committed` (–ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–º–º–∏—Ç–Ω—É—Ç—ã–µ –∑–∞–ø–∏—Å–∏).

---

# 8. Consumer Group, assignment –∏ rebalance ‚Äî –∫—Ç–æ —á—Ç–æ —á–∏—Ç–∞–µ—Ç –∏ –∫–æ–≥–¥–∞
- –ü—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ —Ç–æ–ø–∏–∫, –±—Ä–æ–∫–µ—Ä-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –¥–ª—è –≥—Ä—É–ø–ø—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏–∏ –º–µ–∂–¥—É consumer'–∞–º–∏ (assignment).
- –ü—Ä–∞–≤–∏–ª–æ: **–∫–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Å–ª—É–∂–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º consumer'–æ–º –∏–∑ –≥—Ä—É–ø–ø—ã**. –≠—Ç–æ –¥–∞—ë—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º = —á–∏—Å–ª—É –ø–æ—Ç—Ä–µ–±–ª—è–µ–º—ã—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π (–∏–ª–∏ –º–µ–Ω—å—à–µ, –µ—Å–ª–∏ consumers < partitions).
- –ï—Å–ª–∏ consumers > partitions ‚Äî –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—Ç—å.
- –ï—Å–ª–∏ consumers < partitions ‚Äî –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ consumers –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–π.
- **Rebalance** ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ—Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏ assignment –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ consumers (join/leave/crash) –∏–ª–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏. Rebalance –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–∞—É–∑–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∏ –ø–æ—Ç–µ—Ä–µ –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è poll'–æ–≤, –ø–æ—ç—Ç–æ–º—É –Ω–∞ –∏–Ω—Ç–µ—Ä–≤—å—é —á–∞—Å—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –æ —Ç–æ–º, –∫–∞–∫ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å downtime (e.g. sticky assignment, cooperative-sticky, —É–º–µ–Ω—å—à–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã —Ä–µ–±–∞–ª–∞–Ω—Å–æ–≤).
- Assignment strategies: `range`, `roundrobin`, `sticky`, `cooperative-sticky`. Sticky —Å—Ç—Ä–µ–º–∏—Ç—Å—è –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è partition'–æ–≤ –º–µ–∂–¥—É consumers –¥–ª—è –º–µ–Ω—å—à–∏—Ö –ø–∞—É–∑.

**Commit offsets**:
- –ö–æ–º–º–∏—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç, –¥–æ –∫–∞–∫–æ–≥–æ offset consumer —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–ª. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –¥–µ–ª–∞—é—Ç `commitSync()` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (at-least-once) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `commitAsync()` —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫.
- –ï—Å—Ç—å `sendOffsetsToTransaction()` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –æ—Ñ—Å–µ—Ç–æ–≤ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –ø—Ä–æ–¥—é—Å–µ—Ä–∞.

---

# 9. –ß—Ç–æ –±—É–¥–µ—Ç –≤ —Ç–∏–ø–∏—á–Ω—ã—Ö —Å–æ–±–µ—Å–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö ¬´—Ç–æ–Ω–∫–∏—Ö¬ª —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

**Q: –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –æ–¥–∏–Ω consumer –∏ –±—É–¥–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–π?**  
A: –û–¥–∏–Ω consumer –ø–æ–ª—É—á–∏—Ç –≤ assignment –≤—Å–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏, –∏ –æ–Ω –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å –∏–∑ –≤—Å–µ—Ö –Ω–∏—Ö. –ß—Ç–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–±—Ä–æ–∫–µ—Ä –æ—Ç–¥–∞—ë—Ç –±–∞—Ç—á–∏ –ø–æ —Ä–∞–∑–Ω—ã–º –ø–∞—Ä—Ç–∏—Ü–∏—è–º –∑–∞ –æ–¥–∏–Ω `poll()`) ‚Äî –Ω–æ –µ—Å–ª–∏ —Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—à—å –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ, –æ–±—â–∞—è throughput –æ–≥—Ä–∞–Ω–∏—á–µ–Ω. Ordering –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏, –Ω–æ **–º–µ–∂–¥—É –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω**.

**Q: –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –æ–¥–∏–Ω producer –∏ –º–Ω–æ–≥–æ –ø–∞—Ä—Ç–∏—Ü–∏–π?**  
A: Producer –±—É–¥–µ—Ç –ø–∏—Å–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏. –ï—Å–ª–∏ —É —Å–æ–æ–±—â–µ–Ω–∏–π –µ—Å—Ç—å –∫–ª—é—á ‚Äî Kafka —Ö—ç—à–∏—Ä—É–µ—Ç –∫–ª—é—á –∏ –Ω–∞–ø—Ä–∞–≤–∏—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∫–ª—é—á–æ–º –≤ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–∞—Ä—Ç–∏—Ü–∏—é (–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –ø–æ –∫–ª—é—á—É). –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π default partitioner —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **sticky partitioner**, —Ç–æ –µ—Å—Ç—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –æ–¥–Ω—É ¬´–ª–∏–ø–∫—É—é¬ª –ø–∞—Ä—Ç–∏—Ü–∏—é –¥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞—Ç—á–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è ‚Äî —ç—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç batching/throughput, –Ω–æ –∑–Ω–∞—á–∏—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –±–µ–∑–∫–ª—é—á–µ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –º–æ–≥—É—Ç –∏–¥—Ç–∏ –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é, –∑–∞—Ç–µ–º –≤ –¥—Ä—É–≥—É—é. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RoundRobinPartitioner –∏–ª–∏ —Å–≤–æ–π partitioner.

**Q: –ö–∞–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É? –ö–∞–∫ *–Ω–µ* –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å?**  
- **–ß—Ç–æ–±—ã –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å** (–±—ã—Å—Ç—Ä–æ, –±–µ–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏): `acks=0` —É –ø—Ä–æ–¥—é—Å–µ—Ä–∞ ‚Äî producer –Ω–µ –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫. –£ consumer –º–æ–∂–Ω–æ `enable.auto.commit=true` -> commit –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ‚Äî at-most-once.
- **–ß—Ç–æ–±—ã –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–¢–¨ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏** (–º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä—é): `acks=all`, `min.insync.replicas` >= 2, replication factor >= 2/3, `enable.idempotence=true`, `retries>0`. –î–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –±–µ–∑ –¥—É–±–ª–µ–π ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (exactly-once).
- **–ß—Ç–æ–±—ã –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–¢–¨ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–µ–π –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ**: –ª–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å processed-idempotency-key –≤ –ë–î), –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Kafka Transactions (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–∏—à–µ—Ç –≤ Kafka –∏ —Ö–æ—á–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –ø—Ä–æ–¥—å—é—Å–∏—Ç—å).

**Q: –ö–∞–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫? –ö–∞–∫ *–Ω–µ* –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫?**  
- **–ü–æ—Ä—è–¥–æ–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –ø–∞—Ä—Ç–∏—Ü–∏–∏**. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä—è–¥–æ–∫ –¥–ª—è –Ω–∞–±–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äî –Ω–∞–∑–Ω–∞—á–∞–π—Ç–µ –∏—Ö –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é (–ø–æ –∫–ª—é—á—É) –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∏—Ö –≤ –ø–æ—Ä—è–¥–∫–µ offset.
- –ï—Å–ª–∏ messages —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–∞—Ä—Ç–∏—Ü–∏—è–º ‚Äî –ø–æ—Ä—è–¥–æ–∫ –º–µ–∂–¥—É –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è.
- –ï—Å–ª–∏ consumer –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ–¥–Ω–æ–≥–æ —à–∞–≥–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –∏ –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫, –º–æ–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ ‚Äî –ø–æ—Ä—è–¥–æ–∫ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.

**Q: –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—è–ª–æ—Å—å?**  
- –°—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ—Ç–µ—Ä–∏:
  - Producer –æ—Ç–ø—Ä–∞–≤–∏–ª `acks=0` ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω–æ (–Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –ª–∏–¥–µ—Ä—É).
  - Producer `acks=1`, –ª–∏–¥–µ—Ä –ø—Ä–∏–Ω—è–ª, –Ω–æ –ª–∏–¥–µ—Ä —É–ø–∞–ª –¥–æ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ ‚Äî –µ—Å–ª–∏ replicas –Ω–µ —É—Å–ø–µ–ª–∏ ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è.
  - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `min.insync.replicas`/`acks=all` ‚Üí —Ä–∏—Å–∫.
  - –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω `unclean.leader.election=true` –∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ª–∏–¥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏–º–µ–ª –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π ‚Äî –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è.
- –ö–∞–∫ ¬´—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å¬ª: —É–≤–µ–ª–∏—á–∏—Ç—å replication factor, `acks=all`, `min.insync.replicas`, –æ—Ç–∫–ª—é—á–∏—Ç—å unclean leader election, –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å replica lag, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å durability checks.

**Q: –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ offset –ø–æ—Ç–µ—Ä—è–ª—Å—è?** (—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é, —á—Ç–æ –ø–æ–¥ ¬´–∞—Å—Å–µ—Ç¬ª –±—ã–ª–∞ –æ–ø–µ—á–∞—Ç–∫–∞ –∏ –∏–º–µ–ª—Å—è –≤ –≤–∏–¥—É `offset`)  
- Offset —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `__consumer_offsets`. –ï—Å–ª–∏ –æ—Ñ—Å–µ—Ç —É–¥–∞–ª—ë–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, retention –¥–ª—è —ç—Ç–æ–≥–æ —Ç–æ–ø–∏–∫–∞ –∫–æ—Ä–æ—Ç–∫–∏–π), –∏ –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ consumer'a –æ—Ñ—Å–µ—Ç–∞ –Ω–µ—Ç ‚Äî –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è `auto.offset.reset` (`earliest` –∏–ª–∏ `latest`) ‚Äî consumer –Ω–∞—á–Ω—ë—Ç —á—Ç–µ–Ω–∏–µ —Å –Ω–∞—á–∞–ª–∞ –∏–ª–∏ —Å –∫–æ–Ω—Ü–∞.
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç (commit –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏) ‚Üí –æ—Ñ—Å–µ—Ç –ø–µ—Ä–µ—Å–∫–∞–∫–∏–≤–∞–µ—Ç –≤–ø–µ—Ä—ë–¥ ‚Üí –ø–æ—Ç–µ—Ä—è —Å–æ–æ–±—â–µ–Ω–∏–π (at-most-once).
- –ü–æ—Ç–µ—Ä—è –æ—Ñ—Å–µ—Ç–∞ –ø—Ä–∏ —Ä—É—á–Ω–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏–∏ (–≤ –ë–î) ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∏–º–µ—Ç—å fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.

---

# 10. –í–æ–ø—Ä–æ—Å—ã –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é: —Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–π / –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π / –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤

**–ü–∞—Ä—Ç–∏—Ü–∏–∏**:
- –ü–∞—Ä—Ç–∏—Ü–∏–∏ –¥–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º: —á–∏—Å–ª–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –≤ –≥—Ä—É–ø–ø–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —á–∏—Å–ª–æ–º –ø–∞—Ä—Ç–∏—Ü–∏–π (Nconsumers ‚â§ Npartitions).
- –ë–æ–ª—å—à–µ –ø–∞—Ä—Ç–∏—Ü–∏–π ‚Üí –≤—ã—à–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º, –Ω–æ –∏ –±–æ–ª—å—à–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤: –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —Ñ–∞–π–ª–æ–≤–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è, GC, longer recovery time on leader failover.
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –≤—ã–±–∏—Ä–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –∏—Å—Ö–æ–¥—è –∏–∑ —Ü–µ–ª–µ–≤–æ–π throughput, latency requirements –∏ hardware. –ß–∞—Å—Ç–æ —Å—Ç–∞—Ä—Ç—É—é—Ç —Å 6‚Äì12 –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –Ω–æ –¥–ª—è high-throughput —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º ‚Äî –¥–µ—Å—è—Ç–∫–∏/—Å–æ—Ç–Ω–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π –Ω–∞ —Ç–æ–ø–∏–∫.

**Consumers**:
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å N –∑–∞–¥–∞—á, —Å–æ–∑–¥–∞–π ‚â•N –ø–∞—Ä—Ç–∏—Ü–∏–π –∏ –∑–∞–ø—É—Å—Ç–∏ N consumer'–æ–≤ –≤ –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–µ.
- –ï—Å–ª–∏ —É —Ç–µ–±—è stateful-processing per key ‚Äî –∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞–¥–∞—Ç—å –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é, –∏–Ω–∞—á–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å.

**Producers**:
- –û–±—ã—á–Ω–æ –æ–¥–∏–Ω producer –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å/–∏–Ω—Å—Ç–∞–Ω—Å; –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º, –µ—Å–ª–∏ –Ω–∞–¥–æ —É–≤–µ–ª–∏—á–∏—Ç—å throughput. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ producers –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏, –Ω–æ –±–æ–ª—å—à–µ producers ‚Üí –±–æ–ª—å—à–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞—Ä—Ç–∏—Ü–∏—è–º.

---

# 11. –¢–æ–Ω–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ ¬´–ª–æ–≤—É—à–∫–∏¬ª (—á–∞—Å—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä–≤—å—é)

1. **–ü–æ—á–µ–º—É offset ‚Äî –Ω–µ idempotency key?**  
   Offset ‚Äî –ø–æ–∑–∏—Ü–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏, –æ–Ω –Ω–µ —É–Ω–∏–∫–∞–ª–µ–Ω –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏: –µ—Å–ª–∏ –≤—ã –ø—Ä–æ—á–∏—Ç–∞–ª–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏, –Ω–æ –Ω–µ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ –æ—Ñ—Å–µ—Ç, –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ –≤—ã –ø—Ä–æ—á–∏—Ç–∞–µ—Ç–µ –µ—â—ë —Ä–∞–∑ ‚Üí duplicate. –î–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π –ª–æ–≥–∏–∫–∏ –Ω—É–∂–µ–Ω –±–∏–∑–Ω–µ—Å-–∫–ª—é—á, –ª–∏–±–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

2. **–ü–æ—á–µ–º—É `enable.auto.commit=true` –æ–ø–∞—Å–µ–Ω?**  
   –ü–æ—Ç–æ–º—É —á—Ç–æ Kafka –±—É–¥–µ—Ç –∫–æ–º–º–∏—Ç–∏—Ç—å –æ—Ñ—Å–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –≤–æ–∑–º–æ–∂–Ω–æ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Äî —ç—Ç–æ –¥–∞—ë—Ç at-most-once –∏ –ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ–µ.

3. **–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–µ–π –ø—Ä–∏ retry –Ω–∞ –ø—Ä–æ–¥—é—Å–µ—Ä–µ?**  
   –í–∫–ª—é—á–∏—Ç—å `enable.idempotence=true` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `acks=all`. –¢–æ–≥–¥–∞ –±—Ä–æ–∫–µ—Ä –º–æ–∂–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º producer id –∏ sequence number.

4. **–ü–æ—á–µ–º—É `max.in.flight.requests.per.connection > 1` –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–∏—é?**  
   –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–æ–ª—ë—Ç–µ –∏ –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –æ—Ç–≤–µ—Ç—ã –º–æ–≥—É—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–µ –≤ –ø–æ—Ä—è–¥–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ ‚Üí –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ –ª–∏–¥–µ—Ä/—Ä–µ–ø–ª–∏–∫–µ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å—Å—è. Idempotence –∏ –Ω–æ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —ç—Ç–æ —Ä–µ—à–∞—é—Ç, –Ω–æ —ç—Ç–æ —á–∞—Å—Ç–∞—è –ª–æ–≤—É—à–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

5. **–ß—Ç–æ —Ç–∞–∫–æ–µ unclean leader election –∏ –ø–æ—á–µ–º—É –æ–Ω –æ–ø–∞—Å–µ–Ω?**  
   –ü—Ä–∏ `unclean.leader.election.enable=true` Kafka –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –≤ –ª–∏–¥–µ—Ä—ã —Ä–µ–ø–ª–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—à–ª–∞ –∏–∑ ISR (–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é), —á—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å availability. –ù–æ —Ç–æ–≥–¥–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–∏–¥–µ—Ä–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã (data loss). –î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ª—É—á—à–µ `false`.

6. **–ß—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∏ —Ä–µ–±–∞–ª–∞–Ω—Å–µ –≥—Ä—É–ø–ø—ã –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π?**  
   –ü–æ–∫–∞ –∏–¥—ë—Ç —Ä–µ–±–∞–ª–∞–Ω—Å, consumer'—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∞—Å—Å–∞–π–Ω–µ–Ω—ã ‚Äî messages –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ / commited –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –µ—Å–ª–∏ –Ω–µ –ø—Ä–æ–¥—É–º–∞–Ω–∞ –ª–æ–≥–∏–∫–∞. –†–µ—à–µ–Ω–∏—è: —É–º–µ–Ω—å—à–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É —Ä–µ–±–∞–ª–∞–Ω—Å–æ–≤ (sticky), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ cooperative rebalance, –≥—Ä–∞–º–æ—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å `session.timeout`, `max.poll.interval.ms`, –∏—Å–ø–æ–ª—å–∑—É—è `pause()`/`resume()` –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ commit-–ø–∞—Ç—Ç–µ—Ä–Ω—ã.

7. **–ö–∞–∫ –¥–µ–ª–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –ø–æ—Ä—è–¥–∫–∞?**  
   –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–π –∫–ª—é—á–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è —à–ª–∏ –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é; –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏—é –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ; –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ ‚Äî –≥—Ä—É–ø–ø–∏—Ä—É–π –ø–æ –∫–ª—é—á–∞–º –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ per-key queues.

8. **–ö–∞–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–∏ `retries` —É –ø—Ä–æ–¥—é—Å–µ—Ä–∞?**  
   –ï—Å–ª–∏ –ø—Ä–æ–¥—é—Å–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø–∏—Å—å, –ø–æ–ª—É—á–∏–ª –æ—à–∏–±–∫—É —Å–≤—è–∑–∏, –ø–æ–ø—ã—Ç–∞–ª—Å—è —Å–Ω–æ–≤–∞ ‚Äî –±—Ä–æ–∫–µ—Ä –º–æ–≥ –ø—Ä–∏–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ –ø—Ä–æ–¥—é—Å–µ—Ä –Ω–µ –ø–æ–ª—É—á–∏–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ; –ø—Ä–∏ reconnect –∏ –±–µ–∑ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω–∞ —Å–Ω–æ–≤–∞ ‚Üí duplication.

---

# 12. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ Java-—Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã (–≤–∞–∂–Ω–æ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è)

### Producer ‚Äî –±–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä (Java)
```java
Properties props = new Properties();
props.put("bootstrap.servers", "broker1:9092,broker2:9092");
props.put("key.serializer", "org.apache.kafka.common.serialization.StringSerializer");
props.put("value.serializer", "org.apache.kafka.common.serialization.StringSerializer");
props.put("acks", "all"); // wait for all ISR
props.put("enable.idempotence", "true"); // idempotent producer
props.put("retries", Integer.toString(Integer.MAX_VALUE));
props.put("max.in.flight.requests.per.connection", "5"); // safe with idempotence enabled in newer clients

KafkaProducer<String, String> producer = new KafkaProducer<>(props);
ProducerRecord<String, String> record = new ProducerRecord<>("orders", orderId, orderJson);

producer.send(record, (metadata, exception) -> {
    if (exception != null) {
        // handle error (log/metrics/retry policy)
    } else {
        System.out.println("Sent to partition " + metadata.partition() + " offset " + metadata.offset());
    }
});
producer.flush();
producer.close();
```

### Consumer ‚Äî –±–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä (Java) ‚Äî at-least-once (commit –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏)
```java
Properties props = new Properties();
props.put("bootstrap.servers", "broker1:9092");
props.put("group.id", "order-processor");
props.put("enable.auto.commit", "false"); // manual commit
props.put("key.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");
props.put("value.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");
props.put("max.poll.records", "100");

KafkaConsumer<String, String> consumer = new KafkaConsumer<>(props);
consumer.subscribe(Collections.singletonList("orders"));

try {
    while (true) {
        ConsumerRecords<String, String> records = consumer.poll(Duration.ofMillis(1000));
        for (ConsumerRecord<String, String> rec : records) {
            // process(rec.value())
        }
        // commit offsets after processing batch
        consumer.commitSync();
    }
} finally {
    consumer.close();
}
```

### Producer —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø—Ä–∏–º–µ—Ä consume-transform-produce —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π)
```java
# producer with transactional.id
props.put("enable.idempotence", "true");
props.put("transactional.id", "tx-producer-1");
KafkaProducer<String, String> txProducer = new KafkaProducer<>(props);
txProducer.initTransactions();

while (true) {
    ConsumerRecords<String, String> records = consumer.poll(Duration.ofMillis(1000));
    txProducer.beginTransaction();
    try {
        for (ConsumerRecord<String, String> r : records) {
            // transform and produce to some output topic
            txProducer.send(new ProducerRecord<>("out-topic", r.key(), transform(r.value())));
        }
        // commit consumer offsets as part of the same transaction:
        Map<TopicPartition, OffsetAndMetadata> offsetsToCommit = Collections.singletonMap(
            new TopicPartition(records.partitions().iterator().next()), // simplified
            new OffsetAndMetadata(lastProcessedOffset + 1)
        );
        txProducer.sendOffsetsToTransaction(offsetsToCommit, consumer.groupMetadata());
        txProducer.commitTransaction();
    } catch (Exception e) {
        txProducer.abortTransaction();
    }
}
```
(–≤ —Ä–µ–∞–ª–µ –Ω—É–∂–Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å offsetsToCommit; –ø—Ä–∏–º–µ—Ä –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–∏–≤–µ–Ω)

---

# 13. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Äî —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –ø—Ä–æ–¥–µ
- **Replica lag** ‚Äî –Ω–∞—Å–∫–æ–ª—å–∫–æ followers –æ—Ç—Å—Ç–∞—é—Ç –æ—Ç –ª–∏–¥–µ—Ä–∞ (–Ω–∞—Å—Ç—Ä–æ–π alert –µ—Å–ª–∏ lag > threshold).  
- **Under-replicated partitions** ‚Äî –µ—Å–ª–∏ >0 ‚Üí —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.  
- **Consumer lag** ‚Äî —Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ (important for SLOs).  
- **Broker disk usage, GC pauses, network I/O**.  
- **Rate of rebalances**, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ `PartitionsMoved` –∏ —Ç.–¥.  
- –ò—Å–ø–æ–ª—å–∑—É–µ–º: `kafka-consumer-groups.sh --describe` –¥–ª—è lag, `kafka-topics.sh --describe` –¥–ª—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏, JMX metrics (Kafka —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Ç—Ä–∏–∫).  

---

# 14. Retention / Compaction ‚Äî —á—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –∏ –ø–æ—á–µ–º—É –≤–∞–∂–Ω–æ
- `retention.ms` ‚Äî –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è; —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞. –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç state –ø—É—Ç—ë–º —á—Ç–µ–Ω–∏—è –≤—Å–µ–≥–æ —Ç–æ–ø–∏–∫–∞, —É–º–µ–Ω—å—à–µ–Ω–∏–µ retention –º–æ–∂–µ—Ç ¬´—Å—Ç–µ—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é¬ª, –ø–æ—Ç–æ–º—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∞–∂–Ω–∞.
- `cleanup.policy=compact` ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞ (useful –¥–ª—è changelog/state store). –ö–æ–º–±–∏–Ω–∞—Ü–∏—è `compact,delete` —Ç–æ–∂–µ –≤–æ–∑–º–æ–∂–Ω–∞.
- –ù–∞ –∏–Ω—Ç–µ—Ä–≤—å—é —á–∞—Å—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç: **–∫–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ –∫–ª—é—á—É** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º compaction.

---

# 15. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–∫–æ—Ä–æ—Ç–∫–æ, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
- **SSL/TLS** –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞.  
- **SASL** (PLAIN, SCRAM, GSSAPI/Kerberos) –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.  
- **ACLs** –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–∫—Ç–æ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å/–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ø–∏–∫–∏).  
- **Encryption at rest** (–Ω–∞ —É—Ä–æ–≤–Ω–µ –û–°/–¥–∏—Å–∫–∞), –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

# 16. –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ interview-–≤–æ–ø—Ä–æ—Å—ã (—à–∞–±–ª–æ–Ω—ã –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã)
- **–ö–∞–∫ Kafka –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å?** ‚Äî –ª–æ–≥–∏ –Ω–∞ –¥–∏—Å–∫–µ, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è; leader –ø–∏—à–µ—Ç, followers —Ä–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç; `acks=all + min.insync.replicas` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç durability.
- **–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ñ—Å–µ—Ç—ã?** ‚Äî –≤ `__consumer_offsets` (topic).
- **–ß—Ç–æ —Ç–∞–∫–æ–µ compaction?** ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ –∫–ª—é—á—É, –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è.
- **–ö–∞–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏–¥–µ—Ä-–≤—ã–±–æ—Ä?** ‚Äî –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö ‚Äî Zookeeper, –≤ –Ω–æ–≤—ã—Ö ‚Äî internal controller (KIP-500) ‚Äî –Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è dev'–∞ –≤–∞–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–æ–≤—ã–π –ª–∏–¥–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ ISR. (–ù–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ –º–æ–≥—É—Ç —Å–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–æ KIP-500, –µ—Å–ª–∏ —Ç–µ–º–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è/–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚Äî –±—É–¥—å –≥–æ—Ç–æ–≤: —Å–µ–π—á–∞—Å Kafka –¥–≤–∏–∂–µ—Ç—Å—è –∫ —É–¥–∞–ª–µ–Ω–∏—é ZK.)
- **–ö–∞–∫ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –ø–∞–¥–µ–Ω–∏–µ consumer?** ‚Äî –ø–æ heartbeat -> `session.timeout.ms` –∏ `heartbeat.interval.ms`.
- **–ü–æ—á–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ?** ‚Äî –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –∏–ª–∏ –ø—Ä–∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ consumer'–∞ –Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è offsets.

---

# 17. Best practices –¥–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (—á–µ–∫–ª–∏—Å—Ç)
- –í—Å–µ–≥–¥–∞ –æ–±–¥—É–º—ã–≤–∞–π **partitioning strategy**: –∫–ª—é—á–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ & sharding.
- –î–µ—Ä–∂–∏ **–ø–∞—Ä—Ç–∏—Ü–∏–π >= –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π**, –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ (—É–ø—Ä–∞–≤–ª—è–µ–º–æ–µ —á–∏—Å–ª–æ).
- –ò—Å–ø–æ–ª—å–∑—É–π `enable.auto.commit=false` –∏ –∫–æ–º–º–∏—Ç—å offsets –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.
- –î–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –¥—É–±–ª–µ–π ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ idempotence & transactions –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.
- –î–ª—è –±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ ‚Äî —Ç—é–Ω—å `linger.ms`, `batch.size`, `compression.type`.
- –ú–æ–Ω–∏—Ç–æ—Ä—å lag/under-replicated partitions/ISR.
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π —Ä–µ–±–∞–ª–∞–Ωc—ã: –∏—Å–ø–æ–ª—å–∑—É–π `ConsumerRebalanceListener` —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å state.
- –î–ª—è stateful processing –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Kafka Streams / ksqlDB, –æ–Ω–∏ —Å–∫—Ä—ã–≤–∞—é—Ç –º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç EOF/restore patterns.

---

# 18. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–≤–µ—Ç–∞–º –Ω–∞ –∏–Ω—Ç–µ—Ä–≤—å—é (–∫–∞–∫ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å)
- –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ –Ω–∞—á–∏–Ω–∞–π —Å **–∫–æ—Ä–æ—Ç–∫–æ–≥–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è**, –∑–∞—Ç–µ–º –ø–æ–¥—Ä–æ–±–Ω–æ –æ–±–æ—Å–Ω—É–π, –ø—Ä–∏–≤–µ–¥–∏ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–∑–±–µ—Ä–∏—Å—å –≤ edge-cases.
- –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ ¬´—á—Ç–æ —Å–ª—É—á–∏—Ç—Å—è –µ—Å–ª–∏‚Ä¶¬ª ‚Äî –≤—Å–µ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞–π –ø—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∏ (–∫–∞–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ —Å—Ç–æ—è—Ç: acks, replication factor, min.insync.replicas, enable.idempotence), –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∏—Ö.
- –ï—Å–ª–∏ —Å–ø—Ä–æ—Å—è—Ç ¬´–∫–∞–∫ –¥–æ–±–∏—Ç—å—Å—è exactly-once¬ª ‚Äî —Å–∫–∞–∂–∏: `enable.idempotence=true`, `transactional.id`, –∏—Å–ø–æ–ª—å–∑—É–µ–º `beginTransaction()`, `sendOffsetsToTransaction()` –∏ `commitTransaction()`; —É–ø–æ–º—è–Ω–∏ –æ `isolation.level=read_committed`.
- –î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –≥–æ–≤–æ—Ä–∏ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ number-of-partitions, –Ω–æ –∏ –ø—Ä–æ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (disk I/O, leader recovery time, metadata overhead).

---

# 19. –ö–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ ¬´–ª–æ–≤—É—à–∫–∏¬ª (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∏–Ω—Ç–µ—Ä–≤—å—é)
- –ü–æ—Ä—è–¥–æ–∫? ‚Äî –ì–ê–†–ê–ù–¢–ò–†–£–ï–¢–°–Ø –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏, –Ω–µ –º–µ–∂–¥—É –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏.  
- –û–¥–∏–Ω consumer –∏ –º–Ω–æ–≥–æ –ø–∞—Ä—Ç–∏—Ü–∏–π? ‚Äî consumer –ø–æ–ª—É—á–∏—Ç –≤—Å–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Ö; –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º = 1 –ø–æ—Ç–æ–∫ –Ω–∞ consumer.  
- –û–¥–∏–Ω producer –∏ –º–Ω–æ–≥–æ –ø–∞—Ä—Ç–∏—Ü–∏–π? ‚Äî –µ—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç ‚Äî default partitioner (sticky) —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–∞—Ç—á–∏; –µ—Å–ª–∏ –∫–ª—é—á –µ—Å—Ç—å ‚Äî hash(key) ‚Üí partition.  
- –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö? ‚Äî –ø—Ä–æ–≤–µ—Ä—å `acks`, `min.insync.replicas`, `unclean.leader.election`.  
- –î—É–±–ª–∏? ‚Äî `enable.idempotence` + —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –ª–∏–±–æ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

# 20. –†–µ–∑—é–º–µ / –ø–ª–∞–Ω –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (—à–ø–∞—Ä–≥–∞–ª–∫–∞)
1. Kafka = —Ç–æ–ø–∏–∫–∏ ‚Üí –ø–∞—Ä—Ç–∏—Ü–∏–∏ ‚Üí –æ—Ñ—Å–µ—Ç—ã.  
2. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è: leader + followers + ISR.  
3. `acks` + `min.insync.replicas` ‚Üí durability.  
4. Ordering: per-partition. Use keys for ordering.  
5. Delivery guarantees: at-most-once (commit before processing), at-least-once (commit after processing), exactly-once (transactions + idempotence).  
6. Consumers: –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º = partitions; rebalance ‚Äî –ø–∞—É–∑–∞; –∫–æ–º–º–∏—Ç—ã ‚Üí `__consumer_offsets`.  
7. Producer: batching, compression, retries, idempotence, transactional.id.  
8. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: consumer lag, under-replicated partitions, replica lag.

---

# –∫–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥—É—Å–µ—Ä–∞
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–∞

–ë–∞—Ç—á–∏–Ω–≥ (batching)

batch.size ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ partition (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 16 KB).
–£–≤–µ–ª–∏—á—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 32 KB –∏–ª–∏ 64 KB.

linger.ms ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π, —á—Ç–æ–±—ã –Ω–∞–∫–æ–ø–∏—Ç—å –±–æ–ª—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –±–∞—Ç—á–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0).
–ï—Å–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å 5-10 ms, –ø—Ä–æ–¥—é—Å–µ—Ä –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –±–æ–ª—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–¥–∏–Ω –ø–∞–∫–µ—Ç, —á—Ç–æ —Å–∏–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç throughput.

–°–∂–∞—Ç–∏–µ (compression)

compression.type = snappy, lz4, –∏–ª–∏ zstd.

–£–º–µ–Ω—å—à–∞–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫ –∏ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±—Ä–æ–∫–µ—Ä, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö.

snappy –∏–ª–∏ lz4 —á–∞—Å—Ç–æ –¥–∞—é—Ç –ª—É—á—à–∏–π –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å/—Å–∂–∞—Ç–∏–µ.

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

acks=1 ‚Äî –ø—Ä–æ–¥—é—Å–µ—Ä –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ—Ç –ª–∏–¥–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é). –ë—ã—Å—Ç—Ä–æ, –Ω–æ —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–±–æ–µ –ª–∏–¥–µ—Ä–∞.

acks=0 ‚Äî –≤–æ–æ–±—â–µ –Ω–µ –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π ‚Üí –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ, –Ω–æ –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–π –¥–æ—Å—Ç–∞–≤–∫–∏.

acks=all ‚Äî –Ω–∞–¥—ë–∂–Ω–æ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ.
üëâ –î–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç acks=1.

–ö–æ–ª-–≤–æ in-flight –∑–∞–ø—Ä–æ—Å–æ–≤

max.in.flight.requests.per.connection ‚Äî —á–∏—Å–ª–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 5. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ–≤—ã—à–∞–µ—Ç throughput, –Ω–æ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏ retries > 0.

–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤

–ò—Å–ø–æ–ª—å–∑—É–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö.


–¢—é–Ω–∏–Ω–≥ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—Ä–æ–∫–µ—Ä–∞

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ partition –≤ —Ç–æ–ø–∏–∫–µ: –±–æ–ª—å—à–µ –ø–∞—Ä—Ç–∏—Ü–∏–π = –≤—ã—à–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º.

–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–∏ –ø–æ –±—Ä–æ–∫–µ—Ä–∞–º.

# –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–∞—Ä—Ç–∏—Ü–∏–π –≤ Kafka
hroughput –≤ Apache Kafka –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã ‚Äî –æ–±—ä—ë–º —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º–æ–π –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, —ç—Ç–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –æ—Ç—Ä–∞–∂–∞—é—â–∏–π —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏ (producers) –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏ (consumers) —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä—ã Kafka.
–í Kafka —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –ø–∞—Ä—Ç–∏—Ü–∏–π –ø–æ–≤—ã—à–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º (–±–æ–ª—å—à–µ throughput, –±–æ–ª—å—à–µ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤),  
–Ω–æ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

## –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø–∞–º—è—Ç—å –∏ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
- –ö–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–∞ –¥–∏—Å–∫–µ.  
- –î–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ –±—Ä–æ–∫–µ—Ä –¥–µ—Ä–∂–∏—Ç **–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã** –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏.  
- –ï—Å–ª–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π –æ—á–µ–Ω—å –º–Ω–æ–≥–æ (–¥–µ—Å—è—Ç–∫–∏ —Ç—ã—Å—è—á), —Ç–æ:
  - —Ä–∞—Å—Ç—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **heap** —É –±—Ä–æ–∫–µ—Ä–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞,  
  - —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ **page cache** –û–°.

### 2. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–ø–∏–∫–∞, —Ä–µ–±–∞–ª–∞–Ω—Å–µ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ **–ø–æ –≤—Å–µ–º –ø–∞—Ä—Ç–∏—Ü–∏—è–º**.  
- –ß–µ–º –±–æ–ª—å—à–µ –ø–∞—Ä—Ç–∏—Ü–∏–π ‚Üí —Ç–µ–º –¥–æ–ª—å—à–µ –æ—Ç–∫–ª–∏–∫ –±—Ä–æ–∫–µ—Ä–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.  
- –≠—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ **latency** –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –∏ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤, —Ç.–∫. –∏–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Å–≤–µ–∂–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.

### 3. –î–æ–ª–≥–∏–π —Ä–µ–±–∞–ª–∞–Ω—Å –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –±—Ä–æ–∫–µ—Ä–∞ –µ–≥–æ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –º–µ–∂–¥—É –¥—Ä—É–≥–∏–º–∏.  
- –ï—Å–ª–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, –ø—Ä–æ—Ü–µ—Å—Å **rebalancing** –∑–∞–Ω–∏–º–∞–µ—Ç –º–∏–Ω—É—Ç—ã –∏–ª–∏ –¥–∞–∂–µ —á–∞—Å—ã.  
- –≠—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —á–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.

### 4. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–µ–ø–ª–∏–∫
- –î–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ –µ—Å—Ç—å leader –∏ follower.  
- –ü—Ä–∏ –±–æ–ª—å—à–æ–º —á–∏—Å–ª–µ –ø–∞—Ä—Ç–∏—Ü–∏–π –±—Ä–æ–∫–µ—Ä–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.  
- –≠—Ç–æ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç **—Å–µ—Ç—å** –∏ **–¥–∏—Å–∫**.

### 5. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–¥—é—Å–µ—Ä–∞–º–∏ –∏ –∫–æ–Ω—Å—å—é–º–µ—Ä–∞–º–∏
- –ü—Ä–æ–¥—é—Å–µ—Ä—ã –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–æ–ª–∂–Ω—ã –≤—ã—á–∏—Å–ª—è—Ç—å, –≤ –∫–∞–∫—É—é –ø–∞—Ä—Ç–∏—Ü–∏—é –ø–æ–π–¥—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.  
- –ß–µ–º –±–æ–ª—å—à–µ –ø–∞—Ä—Ç–∏—Ü–∏–π ‚Üí —Ç–µ–º –±–æ–ª—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ **partitioner** –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.  
- –ö–æ–Ω—Å—å—é–º–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç assignment —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–∞—Ä—Ç–∏—Ü–∏–π, —á—Ç–æ —Ç–æ–∂–µ –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª—è—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ.

–ö—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É.

### –ü—Ä–∞–≤–∏–ª–æ
–ß–∏—Å–ª–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –≤—ã–±–∏—Ä–∞—é—Ç –ø–æ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è** –∏/–∏–ª–∏ –ø–æ **–ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**. –§–æ—Ä–º—É–ª–∞:

\[
\text{partitions} = \max\big(\; \text{max\_consumers\_in\_any\_group},\; \lceil \frac{\text{required\_TPS}}{\text{TPS\_per\_partition}} \rceil \;\big) \times \text{safety\_factor}
\]

- `max_consumers_in_any_group` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö consumer-–∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –≤ –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–µ (—Ç.–∫. –æ–¥–Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏—è –º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ consumer –≤ –≥—Ä—É–ø–ø–µ).
- `required_TPS` ‚Äî —Å—É–º–º–∞—Ä–Ω–∞—è —Ü–µ–ª–µ–≤–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (—Å–æ–æ–±—â./—Å).
- `TPS_per_partition` ‚Äî –∏–∑–º–µ—Ä–µ–Ω–Ω–∞—è/–æ—Ü–µ–Ω–æ—á–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏.
- `safety_factor` ‚Äî –∑–∞–ø–∞—Å –Ω–∞ —Ä–æ—Å—Ç/—Ä–∞–∑–±–∞–ª–∞–Ω—Å (–æ–±—ã—á–Ω–æ 1.2‚Äì3, —á–∞—â–µ 1.5‚Äì2).

### –í –≤–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ
- –¢—Ä–∏ —Ä–µ–ø–ª–∏–∫–∏/3 –ø—Ä–æ–¥—é—Å–µ—Ä–∞ ‚Äî **–Ω–µ –≤–ª–∏—è–µ—Ç** –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –ø–∞—Ä—Ç–∏—Ü–∏–π (–ø—Ä–æ–¥—é—Å–µ—Ä—ã –ø–∏—à—É—Ç –≤ –ª—é–±—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏).
- –í–∞–∂–Ω—ã **—Å–∫–æ–ª—å–∫–æ consumer'–æ–≤ –≤ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ**. –ï—Å–ª–∏ –≤ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ –ø–æ 3 consumer'–∞ (—Ç.–µ. —Å–∞–º–∞—è –±–æ–ª—å—à–∞—è –≥—Ä—É–ø–ø–∞ = 3), —Ç–æ –º–∏–Ω–∏–º—É–º –ø–∞—Ä—Ç–∏—Ü–∏–π = **3**.
- –ï—Å–ª–∏ —É –≤–∞—Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø–æ TPS, –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω—É–∂–Ω–æ 5000 msg/s –∏ –æ–¥–Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏—è –¥–µ—Ä–∂–∏—Ç ~1000 msg/s, —Ç–æ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ 5 –ø–∞—Ä—Ç–∏—Ü–∏–π. –¢–æ–≥–¥–∞ –±–µ—Ä—ë–º max(3,5)=5 –∏ —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ safety (—Å–∫–∞–∂–µ–º 1.5) ‚áí ‚âà8 (–æ–∫—Ä—É–≥–ª—è–µ–º –¥–æ —Ü–µ–ª–æ–≥–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä 8).

### –ï—â—ë –≤–∞–∂–Ω–æ–µ
- –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–ª–∏–∫–∞-—Ñ–∞–∫—Ç–æ—Ä (replication.factor) –æ—Ç–¥–µ–ª—å–Ω–æ ‚Äî –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –æ–±—ã—á–Ω–æ 2 –∏–ª–∏ 3 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —á–∏—Å–ª–∞ –±—Ä–æ–∫–µ—Ä–æ–≤).
- –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –¥–∞—ë—Ç –æ–≤–µ—Ä—Ö–µ–¥ (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —Ä–µ–±–∞–ª–∞–Ω—Å—ã), –ø–æ—ç—Ç–æ–º—É –Ω–µ —á—Ä–µ–∑–º–µ—Ä–Ω–æ.

### –ò—Ç–æ–≥ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π
–í–æ–∑—å–º–∏—Ç–µ **–º–∏–Ω–∏–º—É–º = –º–∞–∫—Å–∏–º—É–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –≤ —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π –≥—Ä—É–ø–ø–µ**, –∑–∞—Ç–µ–º —É–≤–µ–ª–∏—á—å—Ç–µ –¥–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –ø–æ TPS, –∏ —É–º–Ω–æ–∂—å—Ç–µ –Ω–∞ –∑–∞–ø–∞—Å (1.2‚Äì2√ó).  

–ï—Å–ª–∏ —Å–∫–∞–∂–µ—Ç–µ, **—Å–∫–æ–ª—å–∫–æ consumer'–æ–≤ –≤ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ** –∏ **—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π/—Å –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å**, –ø–æ—Å—á–∏—Ç–∞—é —Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ.

---

[–ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ best practices Kafka partitions](https://kafka.apache.org/documentation/#design)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Kafka

–í Kafka **–Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è "exactly-once" –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**.  
–°–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤ —Å–ª—É—á–∞–µ:
- —Ä–µ—Ç—Ä–∞–µ–≤ –ø—Ä–æ–¥—é—Å–µ—Ä–∞,
- —Ñ–µ–π–ª–æ–≤ –∫–æ–Ω—Å—å—é–º–µ—Ä–∞ –¥–æ –∫–æ–º–º–∏—Ç–∞ offset,
- —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ failover –±—Ä–æ–∫–µ—Ä–æ–≤.

–ü–æ—ç—Ç–æ–º—É –∫–æ–Ω—Å—å—é–º–µ—Ä—É –≤–∞–∂–Ω–æ —É–º–µ—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å **–¥—É–±–ª–∏–∫–∞—Ç—ã**.

---

## –ü–æ–¥—Ö–æ–¥—ã –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 1. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –°–¥–µ–ª–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π**: –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞—ë—Ç —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.  
- –ü—Ä–∏–º–µ—Ä—ã:
  - `INSERT ... ON CONFLICT DO NOTHING` (PostgreSQL),  
  - `UPSERT` –≤ –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö,  
  - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `PUT` –≤–º–µ—Å—Ç–æ `POST` –≤ API.

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- –í –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª—è—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `id` (UUID, business key).  
- –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–ë–î, Redis, –∫—ç—à), –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å –ª–∏ —É–∂–µ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.  
- –ï—Å–ª–∏ –¥–∞ ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å.

### 3. –•—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö offset-–æ–≤ –≤–º–µ—Å—Ç–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- –í–º–µ—Å—Ç–æ –¥–æ–≤–µ—Ä–∏—è –∞–≤—Ç–æ-–∫–æ–º–º–∏—Ç—É Kafka, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å offset **–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏.  
- –¢–æ–≥–¥–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Å—å—é–º–µ—Ä –±—É–¥–µ—Ç —Ç–æ—á–Ω–æ –∑–Ω–∞—Ç—å, –¥–æ –∫–∞–∫–æ–≥–æ offset –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Exactly-Once Semantics (EOS) –≤ Kafka
- –ù–∞—á–∏–Ω–∞—è —Å Kafka 0.11, –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å:
  - **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–≥–æ –ø—Ä–æ–¥—é—Å–µ—Ä–∞** (`enable.idempotence=true`),  
  - **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** (`transactional.id`).  
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ—Å—Ç–∏—á—å *exactly-once processing* –ø—Ä–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ *consume-transform-produce*.  
- –ù–æ —ç—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É.

---

## –ü—Ä–∏–º–µ—Ä: –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á

```java
for (ConsumerRecord<String, String> record : records) {
    String eventId = record.key(); // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –±–∏–∑–Ω–µ—Å-–∫–ª—é—á
    if (!processedEvents.contains(eventId)) {
        process(record.value());
        processedEvents.add(eventId);
    } else {
        log.info("Duplicate event skipped: {}", eventId);
    }
}


[–∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#apache-kafka)
